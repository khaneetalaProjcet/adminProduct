import{_ as C,r as o,k as I,c as w,b as t,w as n,a1 as F,e as L,h as D,F as E,bR as v,o as f,a2 as x,a,a3 as R,a4 as U,C as h,t as r}from"./index-DehxCGfB.js";import{G as g}from"./price-DK0FZye1.js";import{V as z}from"./VAlert-Essv3Gzh.js";import{V as A}from"./VSwitch-Bm-OGMcv.js";import{V as p}from"./VDivider-mjYHG0Zp.js";import{V as W}from"./VForm-DlwiJ5AP.js";import{V as q}from"./VTextField-DEGMtI39.js";import"./createSimpleFunctional-BLg4IPuf.js";import"./index-C4m-LUGd.js";import"./VSelectionControl-B7QOeeAc.js";import"./index-BGhm_Ad6.js";const H={class:"box"},J={class:"d-flex justify-space-between my-4"},K={class:"my-4"},O={class:"box"},Q={class:"d-flex justify-space-between align-center manual-price-box my-4"},X={key:0},Y={key:1},Z={class:"d-flex justify-space-between align-center my-4"},$={class:"d-flex justify-space-between align-center my-4"},ee={class:"box"},ae={class:"d-flex justify-space-between my-3 py-3"},le={class:"ma-0"},se={class:"d-flex justify-space-between my-3 py-3"},te={class:"ma-0"},oe={class:"d-flex justify-space-between my-3 py-3"},re={class:"ma-0"},ie={class:"d-flex justify-space-between my-3 py-3"},ne={class:"ma-0"},ue={class:"d-flex justify-space-between my-3 py-3"},ce={class:"ma-0"},de={__name:"goldpriceSettingView",setup(pe){const M=o(!1),y=o(!1),_=o(!1),S=o(!1),i=o(!1),u=o(""),c=o({melligold:"-",talair:"-",tgju:"-",talasea:"-",miligold:"-"}),s=o({setManual:!1,goldPriceManual:null}),m=o({buyPrice:"",sellPrice:""}),d=o(""),j=()=>{s.value.goldPriceManual=s.value.goldPriceManual.replace(/\D/g,""),s.value.goldPriceManual.length>10&&(s.value.goldPriceManual=s.value.goldPriceManual.slice(0,11)),s.value.goldPriceManual=k(s.value.goldPriceManual)},k=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),P=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),G=[e=>!!e||"مقدار ورودی نمی‌تواند خالی باشد"],b=async()=>{try{M.value=!0;const e=await g.PriceStatus();return s.value.setManual=e.data.active,e.data.active==!1?d.value="غیر فعال است":d.value=e.data.price,e}catch(e){e.response.status==401&&(localStorage.clear(),v.replace("/login")),u.value=e.response.data.error||"خطایی رخ داده است!",i.value=!0,setTimeout(()=>{i.value=!1},1e4)}finally{M.value=!1}},B=async()=>{try{y.value=!0;const e=await g.SetPriceStatus(s.value.goldPriceManual);return b(),e}catch(e){e.response.status==401&&(localStorage.clear(),v.replace("/login")),u.value=e.response.data.error||"خطایی رخ داده است!",i.value=!0,setTimeout(()=>{i.value=!1},1e4)}finally{y.value=!1}},N=async()=>{try{_.value=!0;const e=await g.switchPriceStatus();return b(),e}catch(e){e.response.status==401&&(localStorage.clear(),v.replace("/login")),u.value=e.response.data.error||"خطایی رخ داده است!",i.value=!0,setTimeout(()=>{i.value=!1},1e4)}finally{_.value=!1}},T=async()=>{try{S.value=!0;const e=await g.GetGoldPrice();return m.value.buyPrice=e.buyPrice,m.value.sellPrice=e.sellPrice,e}catch(e){e.response.status==401&&(localStorage.clear(),v.replace("/login")),u.value=e.response.data.error||"خطایی رخ داده است!",i.value=!0,setTimeout(()=>{i.value=!1},1e4)}finally{S.value=!1}};return I(()=>{b(),T()}),(e,l)=>(f(),w(E,null,[t(F,null,{default:n(()=>[t(x,{cols:"12",md:"6"},{default:n(()=>[a("div",H,[a("div",J,[l[2]||(l[2]=a("h4",null,"اعمال قیمت دستی",-1)),t(A,{modelValue:s.value.setManual,"onUpdate:modelValue":l[0]||(l[0]=V=>s.value.setManual=V),color:"#b08c4d",onInput:N,loading:_.value},null,8,["modelValue","loading"])]),t(p),a("div",K,[t(W,{ref:"form",class:"d-flex align-center",onSubmit:R(B,["prevent"])},{default:n(()=>[t(q,{modelValue:s.value.goldPriceManual,"onUpdate:modelValue":l[1]||(l[1]=V=>s.value.goldPriceManual=V),label:"قیمت دستی طلا (تومان)",variant:"outlined",class:"ma-1",rules:G,onInput:j},null,8,["modelValue"]),t(U,{type:"submit",color:"primary",size:"large",class:"mx-1",loading:y.value,disabled:!s.value.setManual},{default:n(()=>l[3]||(l[3]=[h("اعمال قیمت دستی")])),_:1},8,["loading","disabled"])]),_:1},512)])])]),_:1}),t(x,{cols:"12",md:"6"},{default:n(()=>[a("div",O,[a("div",Q,[l[4]||(l[4]=a("span",null,"قیمت دستی طلا: ",-1)),d.value!="غیر فعال است"?(f(),w("span",X,r(P(d.value))+" تومان",1)):(f(),w("span",Y,r(d.value),1))]),a("div",Z,[l[5]||(l[5]=a("span",null,"قیمت لحظه ای فروش: ",-1)),a("span",null,r(P(m.value.sellPrice))+" تومان",1)]),a("div",$,[l[6]||(l[6]=a("span",null,"قیمت لحظه ای خرید: ",-1)),a("span",null,r(P(m.value.buyPrice))+" تومان",1)])])]),_:1}),t(x,{cols:"12"},{default:n(()=>[a("div",ee,[a("div",ae,[l[7]||(l[7]=a("p",{class:"ma-0"},"قیمت ملی گلد : ",-1)),a("p",le,r(c.value.melligold),1)]),t(p),a("div",se,[l[8]||(l[8]=a("p",{class:"ma-0"},"قیمت tala.ir : ",-1)),a("p",te,r(c.value.talair),1)]),t(p),a("div",oe,[l[9]||(l[9]=a("p",{class:"ma-0"},"قیمت میلی گلد : ",-1)),a("p",re,r(c.value.miligold),1)]),t(p),a("div",ie,[l[10]||(l[10]=a("p",{class:"ma-0"},"قیمت سایت تجارت جهانی : ",-1)),a("p",ne,r(c.value.tgju),1)]),t(p),a("div",ue,[l[11]||(l[11]=a("p",{class:"ma-0"},"قیمت طلاسی : ",-1)),a("p",ce,r(c.value.talasea),1)])])]),_:1})]),_:1}),i.value?(f(),L(z,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:n(()=>[h(r(u.value),1)]),_:1})):D("",!0)],64))}},Me=C(de,[["__scopeId","data-v-c4a57068"]]);export{Me as default};
