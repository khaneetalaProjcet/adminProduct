import{_ as de,r as o,k as me,c as ce,a as n,b as l,w as t,a8 as K,e as O,h as Q,F as ve,bP as V,o as E,a1 as C,a2 as r,a4 as m,C as N,V as G,a3 as W,t as S}from"./index-DspVVL0a.js";import{M as g}from"./managment-HR4C-0Ae.js";import{V as B}from"./VDialog-BrOD-zke.js";import{V as X}from"./VAlert-CPnzodZR.js";import{V as y}from"./VCard-CIAQPhJK.js";import{V as f}from"./VTextField-CCdD-OwD.js";import{V as Y}from"./VDataTable-Elu1ylr1.js";import{V as Z}from"./VForm-CsYt4xCn.js";import"./api-C8aKTHNb.js";import"./dialog-transition-TVHj_z4n.js";import"./index-BHlbWO4l.js";import"./index-DeSb4V3Q.js";import"./createSimpleFunctional-Dm17snd8.js";import"./VAvatar-DhXly0cQ.js";import"./VImg-D-S7GJ_L.js";import"./VSelect-CZGpGuWU.js";import"./VMenu-ygNVPEm6.js";import"./VDivider-xxE4-xEZ.js";import"./VSelectionControl-CDYyKLCF.js";const fe={class:"px-5 py-3 d-flex justify-end"},pe={class:"d-flex justify-space-between"},Ve={class:"d-flex justify-end pa-5"},ge={class:"d-flex justify-end"},ye={class:"content"},be={class:"desc"},ke={class:"content"},xe={class:"desc"},Se={class:"content"},Be={class:"desc"},we={class:"d-flex justify-space-between"},De={__name:"branchView",setup(_e){const b=o(!1),w=o(!1),D=o(!1),_=o(!1),L=o(""),c=o(""),u=o(!1),U=o(""),p=o(!1),h=o(!1),T=o(!1),A=o(!1),$=o(!1),z=o(!1),M=o(!1),j=o(!1),i=o({}),H=o({}),ee=o([{title:"id",key:"id"},{title:"نام شعبه",key:"name"},{title:"کد شعبه",key:"code"},{title:"مدیر",key:"manager"},{title:"اطلاعات",key:"action"}]),d=o({firstName:null,lastName:null,phoneNumber:null}),k=o(!1),P=o([]),le=o([{title:"نام",key:"firstName"},{title:"نام خانوادگی",key:"lastName"},{title:"شماره موبایل",key:"phoneNumber"},{title:"فعالیت",key:"action"}]),q=o([]),F=o(!1),v=o({manager:null,code:null,name:null}),I=async()=>{try{F.value=!0;const a=await g.BranchList();return q.value=a.data,a}catch(a){a.response.status==401&&(localStorage.clear(),V.replace("/login")),c.value=a.response.data.error||"خطایی رخ داده است!",u.value=!0,setTimeout(()=>{u.value=!1},1e4)}finally{F.value=!1}},ae=async()=>{try{A.value=!0;const a=await g.AddBranch(v.value);return b.value=!1,U.value=a.msg,p.value=!0,I(),setTimeout(()=>{p.value=!1},1e4),a}catch(a){a.response.status==401&&(localStorage.clear(),V.replace("/login")),c.value=a.response.data.error||"خطایی رخ داده است!",u.value=!0,setTimeout(()=>{u.value=!1},1e4)}finally{A.value=!1}},te=async a=>{i.value=a,_.value=!0,R(i.value.id)},se=a=>{i.value=a,w.value=!0},oe=async()=>{try{z.value=!0;const a=await g.DeleteBranch(i.value.id);return w.value=!1,I(),a}catch(a){a.response.status==401&&(localStorage.clear(),V.replace("/login")),c.value=a.response.data.error||"خطایی رخ داده است!",u.value=!0,setTimeout(()=>{u.value=!1},1e4)}finally{z.value=!1}},ne=a=>{H.value=a,D.value=!0},ue=async()=>{try{M.value=!0;const a=await g.DeleteSeller(H.value.id);return D.value=!1,R(i.value.id),a}catch(a){a.response.status==401&&(localStorage.clear(),V.replace("/login")),c.value=a.response.data.error||"خطایی رخ داده است!",u.value=!0,setTimeout(()=>{u.value=!1},1e4)}finally{M.value=!1}},R=async a=>{try{j.value=!0;const e=await g.SellerList(a);return P.value=e.data,setTimeout(()=>{p.value=!1},1e4),e}catch(e){e.response.status==401&&(localStorage.clear(),V.replace("/login")),c.value=e.response.data.error||"خطایی رخ داده است!",u.value=!0,setTimeout(()=>{u.value=!1},1e4)}finally{j.value=!1}},re=async()=>{try{$.value=!0;const a=await g.AddSeller(d.value,i.value.id);return k.value=!1,U.value=a.msg,p.value=!0,R(i.value.id),setTimeout(()=>{p.value=!1},1e4),d.value.firstName=null,d.value.lastName=null,d.value.phoneNumber=null,a}catch(a){a.response.status==401&&(localStorage.clear(),V.replace("/login")),c.value=a.response.data.error||"خطایی رخ داده است!",u.value=!0,setTimeout(()=>{u.value=!1},1e4)}finally{$.value=!1}},x=[a=>!!a||"این فیلد الزامی است"],ie=[a=>!!a||"شماره همراه الزامی است",a=>/^09\d{9}$/.test(a)||"شماره معتبر نیست"];return me(()=>{I()}),(a,e)=>(E(),ce(ve,null,[n("div",null,[l(K,null,{default:t(()=>[l(C,null,{default:t(()=>[l(r,{cols:"12"},{default:t(()=>[l(y,{title:"شعبه ها"},{text:t(()=>[l(f,{modelValue:L.value,"onUpdate:modelValue":e[1]||(e[1]=s=>L.value=s),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:t(()=>[n("div",fe,[l(m,{onClick:e[0]||(e[0]=s=>b.value=!0),class:"mx-2"},{default:t(()=>e[19]||(e[19]=[N("افزودن شعبه")])),_:1})]),l(Y,{headers:ee.value,items:q.value,search:L.value,loading:F.value},{"item.action":t(({item:s})=>[l(G,{class:"me-2",size:"small",icon:"ri-store-line",color:"#d4af37",onClick:J=>te(s)},null,8,["onClick"]),l(G,{class:"me-2",size:"small",icon:"ri-delete-bin-line",color:"#c9190c",onClick:J=>se(s)},null,8,["onClick"])]),_:1},8,["headers","items","search","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),l(B,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=s=>b.value=s),"max-width":"600",class:"dialog"},{default:t(()=>[l(y,{class:"dialog-card"},{default:t(()=>[e[20]||(e[20]=n("div",{class:"k-dialog-title"},[n("p",null,"افزودن شعبه جدید")],-1)),l(Z,{ref:"form",modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=s=>h.value=s),onSubmit:W(ae,["prevent"])},{default:t(()=>[l(C,null,{default:t(()=>[l(r,{cols:"12",md:"6",class:"my-4"},{default:t(()=>[l(f,{modelValue:v.value.name,"onUpdate:modelValue":e[2]||(e[2]=s=>v.value.name=s),label:"نام شعبه",variant:"outlined",rules:x},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",md:"6",class:"my-4"},{default:t(()=>[l(f,{modelValue:v.value.code,"onUpdate:modelValue":e[3]||(e[3]=s=>v.value.code=s),label:"کد شعبه",variant:"outlined",rules:x},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",md:"6",class:"my-4"},{default:t(()=>[l(f,{modelValue:v.value.manager,"onUpdate:modelValue":e[4]||(e[4]=s=>v.value.manager=s),label:"مدیر شعبه",variant:"outlined",rules:x},null,8,["modelValue"])]),_:1})]),_:1}),n("div",pe,[l(m,{text:"انصراف",onClick:e[5]||(e[5]=s=>b.value=!1),size:"large",class:"m-3",variant:"outlined"}),l(m,{type:"submit",text:"افزودن",size:"large",class:"m-3",loading:A.value,disabled:!h.value},null,8,["loading","disabled"])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),l(B,{modelValue:_.value,"onUpdate:modelValue":e[10]||(e[10]=s=>_.value=s),transition:"dialog-bottom-transition",fullscreen:""},{default:t(()=>[l(y,null,{default:t(()=>[n("div",Ve,[l(m,{variant:"text",icon:"ri-close-large-line",onClick:e[8]||(e[8]=s=>_.value=!1)})]),l(K,null,{default:t(()=>[l(C,{class:"wallet-info-box"},{default:t(()=>[l(r,{cols:"12"},{default:t(()=>[n("div",ge,[l(m,{onClick:e[9]||(e[9]=s=>k.value=!0),class:"mx-2"},{default:t(()=>e[21]||(e[21]=[N("افزودن فروشنده")])),_:1})])]),_:1}),l(r,{cols:"6",md:"4",class:"my-3"},{default:t(()=>[n("div",ye,[e[22]||(e[22]=n("p",{class:"title"},"نام شعبه: ",-1)),n("p",be,S(i.value.name),1)])]),_:1}),l(r,{cols:"6",md:"4",class:"my-3"},{default:t(()=>[n("div",ke,[e[23]||(e[23]=n("p",{class:"title"},"کد شعبه: ",-1)),n("p",xe,S(i.value.code),1)])]),_:1}),l(r,{cols:"6",md:"4",class:"my-3"},{default:t(()=>[n("div",Se,[e[24]||(e[24]=n("p",{class:"title"},"مدیریت شعبه: ",-1)),n("p",Be,S(i.value.manager),1)])]),_:1}),l(r,{cols:"12",class:"my-2"},{default:t(()=>[l(Y,{headers:le.value,items:P.value,loading:j.value},{"item.action":t(({item:s})=>[l(G,{class:"me-2",size:"small",icon:"ri-delete-bin-line",color:"#c9190c",onClick:J=>ne(s)},null,8,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(B,{modelValue:k.value,"onUpdate:modelValue":e[16]||(e[16]=s=>k.value=s),"max-width":"600",class:"dialog"},{default:t(()=>[l(y,{class:"dialog-card"},{default:t(()=>[e[25]||(e[25]=n("div",{class:"k-dialog-title"},[n("p",null,"افزودن کارمند جدید")],-1)),l(Z,{ref:"form",modelValue:T.value,"onUpdate:modelValue":e[15]||(e[15]=s=>T.value=s),onSubmit:W(re,["prevent"])},{default:t(()=>[l(C,null,{default:t(()=>[l(r,{cols:"12",md:"6",class:"my-4"},{default:t(()=>[l(f,{modelValue:d.value.firstName,"onUpdate:modelValue":e[11]||(e[11]=s=>d.value.firstName=s),label:"نام",variant:"outlined",rules:x},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",md:"6",class:"my-4"},{default:t(()=>[l(f,{modelValue:d.value.lastName,"onUpdate:modelValue":e[12]||(e[12]=s=>d.value.lastName=s),label:"نام خانوادگی",variant:"outlined",rules:x},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",md:"6",class:"my-4"},{default:t(()=>[l(f,{modelValue:d.value.phoneNumber,"onUpdate:modelValue":e[13]||(e[13]=s=>d.value.phoneNumber=s),label:"شماره همراه",variant:"outlined",rules:ie},null,8,["modelValue"])]),_:1})]),_:1}),n("div",we,[l(m,{text:"انصراف",onClick:e[14]||(e[14]=s=>k.value=!1),size:"large",class:"m-3",variant:"outlined"}),l(m,{type:"submit",text:"افزودن",size:"large",class:"m-3",loading:$.value,disabled:!T.value},null,8,["loading","disabled"])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),l(B,{modelValue:w.value,"onUpdate:modelValue":e[17]||(e[17]=s=>w.value=s),width:"auto"},{default:t(()=>[l(y,{width:"400","prepend-icon":"mdi-delete",text:"آیا از حذف شعبه مطمئن هستید؟",title:"حذف شعبه"},{actions:t(()=>[l(m,{class:"ms-auto",text:"حذف",onClick:oe,loading:z.value},null,8,["loading"])]),_:1})]),_:1},8,["modelValue"]),l(B,{modelValue:D.value,"onUpdate:modelValue":e[18]||(e[18]=s=>D.value=s),width:"auto"},{default:t(()=>[l(y,{width:"400","prepend-icon":"mdi-delete",text:"آیا از حذف کارشناس مطمئن هستید؟",title:"حذف کارشناس"},{actions:t(()=>[l(m,{class:"ms-auto",text:"حذف",onClick:ue,loading:M.value},null,8,["loading"])]),_:1})]),_:1},8,["modelValue"]),u.value?(E(),O(X,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:t(()=>[N(S(c.value),1)]),_:1})):Q("",!0),p.value?(E(),O(X,{key:1,color:"success",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:t(()=>[N(S(U.value),1)]),_:1})):Q("",!0)],64))}},Je=de(De,[["__scopeId","data-v-dd852827"]]);export{Je as default};
