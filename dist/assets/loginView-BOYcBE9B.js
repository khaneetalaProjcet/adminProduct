import{ax as c,_ as x,r,c as k,e as w,w as m,h,a as d,b as l,o as f,C as g,t as N,a3 as S,a4 as C,a0 as _}from"./index-BEOb8MMc.js";import{V as I}from"./VAlert-BNFfv-ec.js";import{V as B}from"./VCard-D_UnI2Wu.js";import{V as A}from"./VForm-BozLOBwS.js";import{V as v}from"./VTextField-Bt2zdXQi.js";import"./createSimpleFunctional-nHxdiGUp.js";import"./index-BbmQMC_T.js";import"./VImg-D3wG-KYy.js";const T="/logo.png",D={async Shahkar(n){const o=await c.post("",n);return localStorage.setItem("authtoken",o.data.token),o.data},async Login(n){const o=JSON.stringify(n),a=await c.post("/admin/login",o),s=a.data.data.token,i=a.data.data.accessPoints;return localStorage.setItem("token",s),localStorage.setItem("permissions",JSON.stringify(i)),a.data}},F={__name:"loginView",setup(n){const o=r(!1),a=r({phoneNumber:"",password:""}),s=r(!1),i=r("test"),p=r(!1),V=[e=>!!e||"شماره همراه نمی‌تواند خالی باشد",e=>/^\d{11}$/.test(e)||"شماره همراه باید 11 رقم باشد",e=>e.startsWith("09")||"شماره همراه باید با 09 شروع شود"],b=()=>{a.value.phoneNumber=a.value.phoneNumber.replace(/[٠-٩۰-۹]/g,e=>String.fromCharCode(e.charCodeAt(0)-(e.charCodeAt(0)>=1776?1728:1584))).replace(/\D/g,"").slice(0,11)},y=async()=>{try{s.value=!0;const e=await D.Login(a.value);return _.push("/Dashboard"),e}catch(e){i.value=e.response.data.error||"خطایی رخ داده است!",p.value=!0,setTimeout(()=>{p.value=!1},5e3)}finally{s.value=!1}};return(e,t)=>(f(),k("div",null,[p.value?(f(),w(I,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:m(()=>[g(N(i.value),1)]),_:1})):h("",!0),t[4]||(t[4]=d("div",{class:"d-flex flex-column justify-center align-items-center"},[d("img",{src:T,class:"mx-auto my-6","max-width":"228",alt:"خانه طلا"}),d("p",{class:"title"},"پنل مدیریت خانه طلا")],-1)),l(B,{class:"mx-2 mx-md-auto pa-8",elevation:"4","max-width":"448",rounded:"lg"},{default:m(()=>[l(A,{ref:"form",onSubmit:S(y,["prevent"])},{default:m(()=>[l(v,{modelValue:a.value.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value.phoneNumber=u),label:"شماره همراه",class:"my-6 login-input",rules:V,onInput:b},null,8,["modelValue"]),l(v,{modelValue:a.value.password,"onUpdate:modelValue":t[1]||(t[1]=u=>a.value.password=u),label:"رمز عبور",class:"my-6 login-input","append-inner-icon":o.value?"ri-eye-line":"ri-eye-off-line",type:o.value?"text":"password","onClick:appendInner":t[2]||(t[2]=u=>o.value=!o.value)},null,8,["modelValue","append-inner-icon","type"]),l(C,{type:"submit",class:"mb-8 k-btn",color:"#d4af37",size:"large",loading:s.value,block:""},{default:m(()=>t[3]||(t[3]=[g(" ورود به پنل ")])),_:1},8,["loading"])]),_:1},512)]),_:1})]))}},j=x(F,[["__scopeId","data-v-6f110f5a"]]);export{j as default};
