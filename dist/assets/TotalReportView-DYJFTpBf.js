import{_ as S,r as s,e as d,w as o,a3 as B,q as N,o as r,b as t,a1 as V,a2 as u,a as i,h as m,c as _,a7 as j,F,a4 as H,C as E,a8 as L,a0 as M,t as P}from"./index-DF93Nzvp.js";import{R as q}from"./api-ovRPbq6Z.js";import{V as z}from"./VForm-DFjakEP8.js";import{V as p}from"./VSelect-CWxztT28.js";import{V as G}from"./VTextField-CXmmLowC.js";import"./index-DeOiSdPS.js";import"./VMenu-XzzzlDek.js";import"./index-CYE23lj9.js";import"./createSimpleFunctional-B744msb8.js";import"./VAvatar-Deh8dhBo.js";import"./VImg-CaGVLfSf.js";import"./VDivider-C5qminVQ.js";import"./dialog-transition-DBit8UVm.js";import"./VSelectionControl-BPwKIdzC.js";const I={async ReportSubmit(b){const v=JSON.stringify(b);return(await q.post("/report/analyze/data",v)).data}},J={class:"d-flex flex-column justify-start"},O=["href"],A={class:"d-flex justify-end"},K={__name:"TotalReportView",setup(b){const v=s(!1),c=s(""),T=s(!1),e=s({report:1,startDate:"",startTime:"",endDate:"",endTime:"",type:"all",deal:"all",status:"all",nationalCode:"",auth:""}),y=s({link:[]}),g=s([{value:1,label:"واریز و برداشت"},{value:2,label:"معاملات"},{value:3,label:"کاربران"},{value:4,label:"گزارش گیری ساعتی"}]),w=s([{value:"all",label:"همه"},{value:"deposit",label:"واریز"},{value:"withdraw",label:"برداشت"}]),x=s([{value:"all",label:"همه"},{value:"sell",label:"فروش"},{value:"buy",label:"خرید"}]),U=s([{value:"all",label:"همه"},{value:"approved",label:"احراز شده"},{value:"pebding",label:"در انتظار احراز"}]),C=s([{value:"all",label:"همه"},{value:"fromPhone",label:"تلفنی"},{value:"inPerson",label:"حضوری"},{value:"fromGateway",label:"آنلاین"}]),D=s([{value:"all",label:"همه"},{value:"completed",label:"موفق"},{value:"failed",label:"ناموفق"},{value:"pending",label:"در انتظار"}]),R=async()=>{try{v.value=!0;const n=await I.ReportSubmit(e.value);return y.value.link.push(n[1]),n}catch(n){n.response.status==401&&(localStorage.clear(),M.replace("/login")),c.value=n.response.data.error||"خطایی رخ داده است!",T.value=!0,setTimeout(()=>{T.value=!1},1e4)}finally{v.value=!1}};return(n,l)=>{const f=N("persian-date-picker");return r(),d(z,{onSubmit:B(R,["prevent"])},{default:o(()=>[t(L,{class:"filter-container"},{default:o(()=>[t(V,null,{default:o(()=>[t(u,{cols:"6",md:"4",class:"my-3"},{default:o(()=>[t(p,{modelValue:e.value.report,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.report=a),items:g.value,label:"نوع گزارش",variant:"outlined",rules:[a=>!!a||"حداقل یک مورد الزامیست"],"item-title":"label","item-value":"value"},null,8,["modelValue","items","rules"])]),_:1})]),_:1}),e.value.report!=4?(r(),d(V,{key:0},{default:o(()=>[t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>l[11]||(l[11]=[i("div",{class:"d-flex justify-start align-center"},[i("p",{class:"mb-0"},"زمان شروع: ")],-1)])),_:1}),t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(f,{modelValue:e.value.startDate,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.startDate=a),placeholder:"تاریخ"},null,8,["modelValue"])]),_:1}),t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(f,{type:"time",modelValue:e.value.startTime,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.startTime=a),placeholder:"زمان",format:"HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>l[12]||(l[12]=[i("div",{class:"d-flex justify-start align-center"},[i("p",{class:"mb-0"},"زمان پایان: ")],-1)])),_:1}),t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(f,{modelValue:e.value.endDate,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.endDate=a),placeholder:"تاریخ"},null,8,["modelValue"])]),_:1}),t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(f,{type:"time",modelValue:e.value.endTime,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.endTime=a),placeholder:"زمان",format:"HH:mm:ss"},null,8,["modelValue"])]),_:1}),e.value.report==1?(r(),d(u,{key:0,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(p,{modelValue:e.value.type,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.type=a),items:w.value,label:"نوع انتقال",variant:"outlined","item-title":"label","item-value":"value"},null,8,["modelValue","items"])]),_:1})):m("",!0),e.value.report==2?(r(),d(u,{key:1,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(p,{modelValue:e.value.type,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.type=a),items:x.value,label:"نوع معامله",variant:"outlined","item-title":"label","item-value":"value"},null,8,["modelValue","items"])]),_:1})):m("",!0),e.value.report==2?(r(),d(u,{key:2,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(p,{modelValue:e.value.deal,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.deal=a),items:C.value,label:"نوع ثبت",variant:"outlined","item-title":"label","item-value":"value"},null,8,["modelValue","items"])]),_:1})):m("",!0),e.value.report!=3?(r(),d(u,{key:3,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(p,{modelValue:e.value.status,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.status=a),items:D.value,label:"وضعیت",variant:"outlined","item-title":"label","item-value":"value"},null,8,["modelValue","items"])]),_:1})):m("",!0),e.value.report!=3?(r(),d(u,{key:4,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(G,{modelValue:e.value.nationalCode,"onUpdate:modelValue":l[9]||(l[9]=a=>e.value.nationalCode=a),label:"کد ملی",variant:"outlined"},null,8,["modelValue"])]),_:1})):m("",!0),e.value.report==3?(r(),d(u,{key:5,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(p,{modelValue:e.value.auth,"onUpdate:modelValue":l[10]||(l[10]=a=>e.value.auth=a),items:U.value,label:"وضعیت کاربران",variant:"outlined","item-title":"label","item-value":"value"},null,8,["modelValue","items"])]),_:1})):m("",!0)]),_:1})):m("",!0),t(V,null,{default:o(()=>[t(u,{cols:"12"},{default:o(()=>[i("div",J,[y.value.link!=""?(r(!0),_(F,{key:0},j(y.value.link,(a,k)=>(r(),_("a",{class:"download-link my-1",key:k,href:a},"دانلود گزارش "+P(k+1),9,O))),128)):m("",!0)])]),_:1}),t(u,{cols:"12"},{default:o(()=>[i("div",A,[t(H,{type:"submit",loading:v.value},{default:o(()=>l[13]||(l[13]=[E("ایجاد گزارش")])),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1})}}},re=S(K,[["__scopeId","data-v-ab402c8b"]]);export{re as default};
