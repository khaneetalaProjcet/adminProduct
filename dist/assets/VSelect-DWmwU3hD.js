import{d as Pe,e as Te,V as de}from"./VTextField-BX-aWGtp.js";import{G as z,I as ye,N as te,a9 as ee,B as R,T as le,a8 as Ve,b as f,Y as E,H as be,bx as we,l as M,F as W,p as Ce,A as L,aP as fe,r as N,b4 as ke,bb as oe,aS as Ae,bG as Re,a6 as Ie,aX as ie,ah as De,aB as Be,ai as Fe,y as Oe,b3 as _e,aj as Z,i as Ee,Q as Le,aR as ue,V as ve,bH as He,ag as Me,D as Ue,aI as qe,bI as me,bf as he}from"./index-D6NN9nJi.js";import{f as Ke}from"./index-ByxnNLuS.js";import{m as Ne,u as ze,V as $e,a as je,b as pe}from"./VMenu-LTn4vSWV.js";import{m as We}from"./index-Ce-FaU_b.js";import{g as Ge,a as Xe}from"./dialog-transition-kGvKCl72.js";import{m as Ye,V as ge}from"./VSelectionControl-JGB9LPR1.js";import{V as Qe}from"./VAvatar-cwbRiH4K.js";import{V as Je}from"./VChip-BARVuehg.js";const Ze=z({indeterminate:Boolean,indeterminateIcon:{type:ye,default:"$checkboxIndeterminate"},...Ye({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),et=te()({name:"VCheckboxBtn",props:Ze(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,c){let{slots:n}=c;const r=ee(e,"indeterminate"),o=ee(e,"modelValue");function v(i){r.value&&(r.value=!1)}const m=R(()=>r.value?e.indeterminateIcon:e.falseIcon),a=R(()=>r.value?e.indeterminateIcon:e.trueIcon);return le(()=>{const i=Ve(ge.filterProps(e),["modelValue"]);return f(ge,E(i,{modelValue:o.value,"onUpdate:modelValue":[b=>o.value=b,v],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:m.value,trueIcon:a.value,"aria-checked":r.value?"mixed":void 0}),n)}),{}}}),tt=z({renderless:Boolean,...be()},"VVirtualScrollItem"),lt=te()({name:"VVirtualScrollItem",inheritAttrs:!1,props:tt(),emits:{"update:height":e=>!0},setup(e,c){let{attrs:n,emit:r,slots:o}=c;const{resizeRef:v,contentRect:m}=we(void 0,"border");M(()=>{var a;return(a=m.value)==null?void 0:a.height},a=>{a!=null&&r("update:height",a)}),le(()=>{var a,i;return e.renderless?f(W,null,[(a=o.default)==null?void 0:a.call(o,{itemRef:v})]):f("div",E({ref:v,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(i=o.default)==null?void 0:i.call(o)])})}}),nt=-1,at=1,re=100,ot=z({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function ut(e,c){const n=Ce(),r=L(0);fe(()=>{r.value=parseFloat(e.itemHeight||0)});const o=L(0),v=L(Math.ceil((parseInt(e.height)||n.height.value)/(r.value||16))||1),m=L(0),a=L(0),i=N(),b=N();let s=0;const{resizeRef:O,contentRect:A}=we();fe(()=>{O.value=i.value});const k=R(()=>{var t;return i.value===document.documentElement?n.height.value:((t=A.value)==null?void 0:t.height)||parseInt(e.height)||0}),D=R(()=>!!(i.value&&b.value&&k.value&&r.value));let x=Array.from({length:c.value.length}),I=Array.from({length:c.value.length});const y=L(0);let P=-1;function _(t){return x[t]||r.value}const p=Re(()=>{const t=performance.now();I[0]=0;const u=c.value.length;for(let h=1;h<=u-1;h++)I[h]=(I[h-1]||0)+_(h-1);y.value=Math.max(y.value,performance.now()-t)},y),G=M(D,t=>{t&&(G(),s=b.value.offsetTop,p.immediate(),B(),~P&&Ie(()=>{ie&&window.requestAnimationFrame(()=>{J(P),P=-1})}))});ke(()=>{p.clear()});function ne(t,u){const h=x[t],V=r.value;r.value=V?Math.min(r.value,u):u,(h!==u||V!==r.value)&&(x[t]=u,p())}function T(t){return t=oe(t,0,c.value.length-1),I[t]||0}function X(t){return rt(I,t)}let U=0,H=0,$=0;M(k,(t,u)=>{u&&(B(),t<u&&requestAnimationFrame(()=>{H=0,B()}))});let q=-1;function K(){if(!i.value||!b.value)return;const t=i.value.scrollTop,u=performance.now();u-$>500?(H=Math.sign(t-U),s=b.value.offsetTop):H=t-U,U=t,$=u,window.clearTimeout(q),q=window.setTimeout(Y,500),B()}function Y(){!i.value||!b.value||(H=0,$=0,window.clearTimeout(q),B())}let Q=-1;function B(){cancelAnimationFrame(Q),Q=requestAnimationFrame(ae)}function ae(){if(!i.value||!k.value)return;const t=U-s,u=Math.sign(H),h=Math.max(0,t-re),V=oe(X(h),0,c.value.length),d=t+k.value+re,g=oe(X(d)+1,V+1,c.value.length);if((u!==nt||V<o.value)&&(u!==at||g>v.value)){const S=T(o.value)-T(V),F=T(g)-T(v.value);Math.max(S,F)>re?(o.value=V,v.value=g):(V<=0&&(o.value=V),g>=c.value.length&&(v.value=g))}m.value=T(o.value),a.value=T(c.value.length)-T(v.value)}function J(t){const u=T(t);!i.value||t&&!u?P=t:i.value.scrollTop=u}const l=R(()=>c.value.slice(o.value,v.value).map((t,u)=>{const h=u+o.value;return{raw:t,index:h,key:Ae(t,e.itemKey,h)}}));return M(c,()=>{x=Array.from({length:c.value.length}),I=Array.from({length:c.value.length}),p.immediate(),B()},{deep:1}),{calculateVisibleItems:B,containerRef:i,markerRef:b,computedItems:l,paddingTop:m,paddingBottom:a,scrollToIndex:J,handleScroll:K,handleScrollend:Y,handleItemResize:ne}}function rt(e,c){let n=e.length-1,r=0,o=0,v=null,m=-1;if(e[n]<c)return n;for(;r<=n;)if(o=r+n>>1,v=e[o],v>c)n=o-1;else if(v<c)m=o,r=o+1;else return v===c?o:r;return m}const it=z({items:{type:Array,default:()=>[]},renderless:Boolean,...ot(),...be(),...De()},"VVirtualScroll"),st=te()({name:"VVirtualScroll",props:it(),setup(e,c){let{slots:n}=c;const r=Be("VVirtualScroll"),{dimensionStyles:o}=Fe(e),{calculateVisibleItems:v,containerRef:m,markerRef:a,handleScroll:i,handleScrollend:b,handleItemResize:s,scrollToIndex:O,paddingTop:A,paddingBottom:k,computedItems:D}=ut(e,Oe(e,"items"));return _e(()=>e.renderless,()=>{function x(){var P,_;const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[y]("scroll",i,{passive:!0}),document[y]("scrollend",b)):((P=m.value)==null||P[y]("scroll",i,{passive:!0}),(_=m.value)==null||_[y]("scrollend",b))}Ee(()=>{m.value=Ge(r.vnode.el,!0),x(!0)}),ke(x)}),le(()=>{const x=D.value.map(I=>f(lt,{key:I.key,renderless:e.renderless,"onUpdate:height":y=>s(I.index,y)},{default:y=>{var P;return(P=n.default)==null?void 0:P.call(n,{item:I.raw,index:I.index,...y})}}));return e.renderless?f(W,null,[f("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:Z(A.value)}},null),x,f("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Z(k.value)}},null)]):f("div",{ref:m,class:["v-virtual-scroll",e.class],onScrollPassive:i,onScrollend:b,style:[o.value,e.style]},[f("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:Z(A.value),paddingBottom:Z(k.value)}},[x])])}),{calculateVisibleItems:v,scrollToIndex:O}}});function ct(e,c){const n=L(!1);let r;function o(a){cancelAnimationFrame(r),n.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{n.value=!1})})}async function v(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(n.value){const i=M(n,()=>{i(),a()})}else a()})}async function m(a){var s,O;if(a.key==="Tab"&&((s=c.value)==null||s.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const i=(O=e.value)==null?void 0:O.$el;if(!i)return;(a.key==="Home"||a.key==="End")&&i.scrollTo({top:a.key==="Home"?0:i.scrollHeight,behavior:"smooth"}),await v();const b=i.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const A=i.getBoundingClientRect().top;for(const k of b)if(k.getBoundingClientRect().top>=A){k.focus();break}}else{const A=i.getBoundingClientRect().bottom;for(const k of[...b].reverse())if(k.getBoundingClientRect().bottom<=A){k.focus();break}}}return{onScrollPassive:o,onKeydown:m}}const dt=z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ye,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Ne({itemChildren:!1})},"Select"),ft=z({...dt(),...Ve(Pe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...We({transition:{component:Xe}})},"VSelect"),kt=te()({name:"VSelect",props:ft(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,c){let{slots:n}=c;const{t:r}=Le(),o=N(),v=N(),m=N(),{items:a,transformIn:i,transformOut:b}=ze(e),s=ee(e,"modelValue",[],l=>i(l===null?[null]:qe(l)),l=>{const t=b(l);return e.multiple?t:t[0]??null}),O=R(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:s.value.length),A=Te(e),k=R(()=>s.value.map(l=>l.value)),D=L(!1);let x="",I;const y=R(()=>e.hideSelected?a.value.filter(l=>!s.value.some(t=>(e.valueComparator||ue)(t,l))):a.value),P=R(()=>e.hideNoData&&!y.value.length||A.isReadonly.value||A.isDisabled.value),_=ee(e,"menu"),p=R({get:()=>_.value,set:l=>{var t;_.value&&!l&&((t=v.value)!=null&&t.Î¨openChildren.size)||l&&P.value||(_.value=l)}}),G=R(()=>p.value?e.closeText:e.openText),ne=R(()=>{var l;return{...e.menuProps,activatorProps:{...((l=e.menuProps)==null?void 0:l.activatorProps)||{},"aria-haspopup":"listbox"}}}),T=N(),X=ct(T,o);function U(l){e.openOnClear&&(p.value=!0)}function H(){P.value||(p.value=!p.value)}function $(l){me(l)&&q(l)}function q(l){var V,d;if(!l.key||A.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(p.value=!0),["Escape","Tab"].includes(l.key)&&(p.value=!1),l.key==="Home"?(V=T.value)==null||V.focus("first"):l.key==="End"&&((d=T.value)==null||d.focus("last"));const t=1e3;if(!me(l))return;const u=performance.now();u-I>t&&(x=""),x+=l.key.toLowerCase(),I=u;const h=a.value.find(g=>g.title.toLowerCase().startsWith(x));if(h!==void 0){s.value=[h];const g=y.value.indexOf(h);ie&&window.requestAnimationFrame(()=>{var S;g>=0&&((S=m.value)==null||S.scrollToIndex(g))})}}function K(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!l.props.disabled)if(e.multiple){const u=s.value.findIndex(V=>(e.valueComparator||ue)(V.value,l.value)),h=t??!~u;if(~u){const V=h?[...s.value,l]:[...s.value];V.splice(u,1),s.value=V}else h&&(s.value=[...s.value,l])}else{const u=t!==!1;s.value=u?[l]:[],Ie(()=>{p.value=!1})}}function Y(l){var t;(t=T.value)!=null&&t.$el.contains(l.relatedTarget)||(p.value=!1)}function Q(){var l;e.eager&&((l=m.value)==null||l.calculateVisibleItems())}function B(){var l;D.value&&((l=o.value)==null||l.focus())}function ae(l){D.value=!0}function J(l){if(l==null)s.value=[];else if(he(o.value,":autofill")||he(o.value,":-webkit-autofill")){const t=a.value.find(u=>u.title===l);t&&K(t)}else o.value&&(o.value.value="")}return M(p,()=>{if(!e.hideSelected&&p.value&&s.value.length){const l=y.value.findIndex(t=>s.value.some(u=>(e.valueComparator||ue)(u.value,t.value)));ie&&window.requestAnimationFrame(()=>{var t;l>=0&&((t=m.value)==null||t.scrollToIndex(l))})}}),M(()=>e.items,(l,t)=>{p.value||D.value&&!t.length&&l.length&&(p.value=!0)}),le(()=>{const l=!!(e.chips||n.chip),t=!!(!e.hideNoData||y.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),u=s.value.length>0,h=de.filterProps(e),V=u||!D.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return f(de,E({ref:o},h,{modelValue:s.value.map(d=>d.props.value).join(", "),"onUpdate:modelValue":J,focused:D.value,"onUpdate:focused":d=>D.value=d,validationValue:s.externalValue,counterValue:O.value,dirty:u,class:["v-select",{"v-select--active-menu":p.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:V,"onClick:clear":U,"onMousedown:control":H,onBlur:Y,onKeydown:q,"aria-label":r(G.value),title:r(G.value)}),{...n,default:()=>f(W,null,[f($e,E({ref:v,modelValue:p.value,"onUpdate:modelValue":d=>p.value=d,activator:"parent",contentClass:"v-select__content",disabled:P.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Q,onAfterLeave:B},ne.value),{default:()=>[t&&f(je,E({ref:T,selected:k.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:d=>d.preventDefault(),onKeydown:$,onFocusin:ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},X,e.listProps),{default:()=>{var d,g,S;return[(d=n["prepend-item"])==null?void 0:d.call(n),!y.value.length&&!e.hideNoData&&(((g=n["no-data"])==null?void 0:g.call(n))??f(pe,{key:"no-data",title:r(e.noDataText)},null)),f(st,{ref:m,renderless:!0,items:y.value,itemKey:"value"},{default:F=>{var ce;let{item:w,index:j,itemRef:C}=F;const se=E(w.props,{ref:C,key:w.value,onClick:()=>K(w,null)});return((ce=n.item)==null?void 0:ce.call(n,{item:w,index:j,props:se}))??f(pe,E(se,{role:"option"}),{prepend:Se=>{let{isSelected:xe}=Se;return f(W,null,[e.multiple&&!e.hideSelected?f(et,{key:w.value,modelValue:xe,ripple:!1,tabindex:"-1"},null):void 0,w.props.prependAvatar&&f(Qe,{image:w.props.prependAvatar},null),w.props.prependIcon&&f(ve,{icon:w.props.prependIcon},null)])}})}}),(S=n["append-item"])==null?void 0:S.call(n)]}})]}),s.value.map((d,g)=>{function S(C){C.stopPropagation(),C.preventDefault(),K(d,!1)}const F={"onClick:close":S,onKeydown(C){C.key!=="Enter"&&C.key!==" "||(C.preventDefault(),C.stopPropagation(),S(C))},onMousedown(C){C.preventDefault(),C.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},w=l?!!n.chip:!!n.selection,j=w?He(l?n.chip({item:d,index:g,props:F}):n.selection({item:d,index:g})):void 0;if(!(w&&!j))return f("div",{key:d.value,class:"v-select__selection"},[l?n.chip?f(Me,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:d.title}}},{default:()=>[j]}):f(Je,E({key:"chip",closable:e.closableChips,size:"small",text:d.title,disabled:d.props.disabled},F),null):j??f("span",{class:"v-select__selection-text"},[d.title,e.multiple&&g<s.value.length-1&&f("span",{class:"v-select__selection-comma"},[Ue(",")])])])})]),"append-inner":function(){var F,w;for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return f(W,null,[(F=n["append-inner"])==null?void 0:F.call(n,...g),e.menuIcon?f(ve,{class:"v-select__menu-icon",color:(w=o.value)==null?void 0:w.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),Ke({isFocused:D,menu:p,select:K},o)}});export{kt as V,et as a,Ze as m};
