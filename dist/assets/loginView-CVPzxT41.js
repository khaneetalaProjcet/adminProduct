import{al as c,_ as y,r as s,c as b,e as k,w as m,h as w,a as p,b as l,o as f,C as v,t as x,a3 as N,a4 as S,a0 as _}from"./index-BGGQp8am.js";import{V as B}from"./VAlert-DT-B8a-f.js";import{V as C}from"./VCard-DviU4idv.js";import{V as I}from"./VForm-Bx251n1z.js";import{V as g}from"./VTextField-WP0qWeTO.js";import"./createSimpleFunctional-CvY-CSpH.js";import"./VAvatar-DaVSZH8j.js";import"./VImg-BkyScCE_.js";import"./index-D9pifSW7.js";import"./index-D6Ttif6R.js";const T="/logo.png",h={async Shahkar(r){const a=await c.post("",r);return localStorage.setItem("authtoken",a.data.token),a.data},async Login(r){const a=JSON.stringify(r),t=await c.post("/admin/login",a),o=t.data.data.token,n=t.data.data.accessPoints;return localStorage.setItem("token",o),localStorage.setItem("permissions",JSON.stringify(n)),t.data}},L={__name:"loginView",setup(r){const a=s(!1),t=s({userName:"",password:""}),o=s(!1),n=s("test"),d=s(!1),V=async()=>{try{o.value=!0;const i=await h.Login(t.value);return _.push("/Dashboard"),i}catch(i){n.value=i.response.data.error||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{o.value=!1}};return(i,e)=>(f(),b("div",null,[d.value?(f(),k(B,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:m(()=>[v(x(n.value),1)]),_:1})):w("",!0),e[4]||(e[4]=p("div",{class:"d-flex flex-column justify-center align-items-center"},[p("img",{src:T,class:"mx-auto my-6","max-width":"228",alt:"خانه طلا"}),p("p",{class:"title"},"پنل مدیریت خانه طلا")],-1)),l(C,{class:"mx-2 mx-md-auto pa-8",elevation:"4","max-width":"448",rounded:"lg"},{default:m(()=>[l(I,{ref:"form",onSubmit:N(V,["prevent"])},{default:m(()=>[l(g,{modelValue:t.value.userName,"onUpdate:modelValue":e[0]||(e[0]=u=>t.value.userName=u),label:"نام کاربری",class:"my-6 login-input"},null,8,["modelValue"]),l(g,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>t.value.password=u),label:"رمز عبور",class:"my-6 login-input","append-inner-icon":a.value?"ri-eye-line":"ri-eye-off-line",type:a.value?"text":"password","onClick:appendInner":e[2]||(e[2]=u=>a.value=!a.value)},null,8,["modelValue","append-inner-icon","type"]),l(S,{type:"submit",class:"mb-8 k-btn",color:"#d4af37",size:"large",loading:o.value,block:""},{default:m(()=>e[3]||(e[3]=[v(" ورود به پنل ")])),_:1},8,["loading"])]),_:1},512)]),_:1})]))}},z=y(L,[["__scopeId","data-v-f9969c16"]]);export{z as default};
