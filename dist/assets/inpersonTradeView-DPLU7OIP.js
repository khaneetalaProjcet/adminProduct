import{_ as ke}from"./MoneyInput-DYoPYZvW.js";import{_ as nl,r as c,A as Ue,c as U,b as l,w as a,a1 as k,e as C,h as T,F as ze,q as il,o as g,a2 as d,a6 as rl,a7 as ue,a as u,C as P,a4 as I,V as O,t as f,a0 as Q,a9 as vl,a8 as De}from"./index-S07i3_yA.js";import{I as oe}from"./inperson-D-wi163L.js";import{G as ml}from"./price-CZ8Evh6l.js";import{V as cl}from"./VAlert-CEGFNy9k.js";import{V as fl}from"./VDialog-DS_Kk8-y.js";import{V as pl,a as gl,b as bl,c as be,d as Vl}from"./VStepper-CuGF1fPk.js";import{V as de,b as se}from"./VCard-CK_L893f.js";import{V as ne}from"./VForm-BQLgKKGD.js";import{V as R}from"./VTextField-C9gd6H9m.js";import{V as yl}from"./VOtpInput-CEb8fB_q.js";import{V as Ve}from"./VSelect-DkUwVwQH.js";import{V as _l,a as Be,b as Cl,c as Fe}from"./VTabs-BJjJT6Wo.js";import{V as ye}from"./VDivider-DSKMAsFd.js";import{V as Le}from"./VTextarea-Cnh1OnHC.js";import"./api-4cWseWkK.js";import"./createSimpleFunctional-DGOfHgJf.js";import"./dialog-transition-Ok85cdwd.js";import"./index-BuMlINyh.js";import"./index-D-reyYgI.js";import"./VAvatar-CDKgJ41f.js";import"./VImg-SC7xATcR.js";import"./VWindowItem-DtVRGBtx.js";import"./VMenu-BDLmjwGr.js";import"./VSelectionControl-Bj3ugf6Y.js";const Pl={class:"w-100 d-flex justify-space-between align-items-center"},wl={key:0,class:"d-flex"},xl={key:1,class:"d-flex"},Nl={key:1,class:"d-flex"},kl={class:"mb-0"},hl={class:"d-flex"},Wl={class:"mb-0"},Il={class:"d-flex"},Sl={class:"mb-0"},Tl={class:"d-flex"},Ul={key:0,class:"mb-0"},zl={key:1,class:"mb-0"},Dl={class:"d-flex"},Bl={class:"mb-0"},Fl={class:"d-flex"},Ll={class:"mb-0"},Ml={class:"d-flex"},$l={class:"mb-0"},jl={class:"d-flex"},Gl={class:"mb-0"},Rl={class:"d-flex"},Al={class:"d-flex"},Hl={class:"mb-0"},Ol={class:"livePrice-box py-2"},El={class:"d-flex justify-center align-center h-100"},Yl={class:"d-flex flex-column"},ql={class:"d-flex flex-column"},Jl={class:"d-flex flex-column"},Kl={class:"d-flex justify-start align-center h-100"},Ql={class:"livePrice-box"},Xl={class:"d-flex justify-center align-center h-100"},Zl={class:"w-100 d-flex justify-space-between align-items-center"},ea={class:"trade-step-title"},la={class:"invoice-box"},aa={class:"invoice-box"},ta={class:"invoice-box"},ua={class:"invoice-box"},oa={class:"invoice-box"},da={class:"invoice-box"},sa={class:"invoice-box"},na={class:"invoice-box"},ia={class:"invoice-box"},ra={class:"invoice-box"},va={key:0},ma={key:1},ca={key:2},fa={class:"invoice-box"},pa={class:"invoice-box"},ga={class:"invoice-box"},ba={class:"invoice-box"},Va={__name:"inpersonTradeView",setup(ya){const Me=c([1,2,3,4]),w=c(1),ie=c(null),re=c({}),_e=c(!1),ve=c(!1),E=c(!1),me=c(!1),ce=c(!1),Ce=c(!1),A=c(!1),Y=c(),q=c(),J=c(),h=c(!1),H=c(""),W=c({phoneNumber:"",otp:""}),v=c({isVerified:"",id:"",firstName:"",birthDate:"",lastName:"",fatherName:"",gender:"",officeName:"",phoneNumber:"",nationalCode:"",isHaveBank:"",wallet:{id:"",goldWeight:"",balance:""}}),b=c({nationalCode:"",goldPrice:"",goldWeight:"",description:"",totalPrice:"",invoiceId:"",paymentMethod:"",destCardPan:""}),V=c({nationalCode:"",goldPrice:"",goldWeight:"",description:"",totalPrice:"",invoiceId:""}),m=c({date:"",time:"",buyPrice:"",sellPrice:"",milliseconds:""}),n=c({type:"",goldPrice:"",goldWeight:"",totalPrice:"",date:"",time:"",adminId:"",paymentMethod:"",destCardPan:"",wallet:{goldWeight:"",balance:"",blocked:""},user:{firstName:"",lastName:"",fatherName:"",phoneNumber:"",nationalCode:""}}),x=c({cash:null,cashId:"",creditCard:null,creditCardId:"",cardToCard:null,cardToCardId:""});c([{label:"کارت به کارت",value:"1"},{label:"دستگاه پوز",value:"2"},{label:"نقدی",value:"3"}]);const $e=c([{label:"کشاورزی (مطهر معصومی)"},{label:"ملی (مطهر معصومی)"},{label:"ملت (مطهر معصومی)"},{label:"سپه (مطهر معصومی)"},{label:"صادرات (مطهر معصومی)"},{label:"کشاورزی (محمود معصومی)"},{label:"ملی (محمود معصومی)"},{label:"ملت (محمود معصومی)"},{label:"سایر"}]),je=c([{name:"1",value:1},{name:"2",value:2},{name:"3",value:3},{name:"4",value:4},{name:"5",value:5},{name:"6",value:6},{name:"7",value:7},{name:"8",value:8},{name:"9",value:9},{name:"10",value:10},{name:"11",value:11},{name:"12",value:12},{name:"13",value:13},{name:"14",value:14},{name:"15",value:15},{name:"16",value:16},{name:"17",value:17},{name:"18",value:18},{name:"19",value:19},{name:"20",value:20},{name:"21",value:21},{name:"22",value:22},{name:"23",value:23},{name:"24",value:24},{name:"25",value:25},{name:"26",value:26},{name:"27",value:27},{name:"28",value:28},{name:"29",value:29},{name:"30",value:30},{name:"31",value:31}]),Ge=c([{name:"فروردین",value:1},{name:"اردیبهشت",value:2},{name:"خرداد",value:3},{name:"تیر",value:4},{name:"مرداد",value:5},{name:"شهریور",value:6},{name:"مهر",value:7},{name:"آبان",value:8},{name:"آذر",value:9},{name:"دی",value:10},{name:"بهمن",value:11},{name:"اسفند",value:12}]),Re=c([{name:"1300",value:1300},{name:"1301",value:1301},{name:"1302",value:1302},{name:"1303",value:1303},{name:"1304",value:1304},{name:"1305",value:1305},{name:"1306",value:1306},{name:"1307",value:1307},{name:"1308",value:1308},{name:"1309",value:1309},{name:"1310",value:1310},{name:"1311",value:1311},{name:"1312",value:1312},{name:"1313",value:1313},{name:"1314",value:1314},{name:"1315",value:1315},{name:"1316",value:1316},{name:"1317",value:1317},{name:"1318",value:1318},{name:"1319",value:1319},{name:"1320",value:1320},{name:"1321",value:1321},{name:"1322",value:1322},{name:"1323",value:1323},{name:"1324",value:1324},{name:"1325",value:1325},{name:"1326",value:1326},{name:"1327",value:1327},{name:"1328",value:1328},{name:"1329",value:1329},{name:"1330",value:1330},{name:"1331",value:1331},{name:"1332",value:1332},{name:"1333",value:1333},{name:"1334",value:1334},{name:"1335",value:1335},{name:"1336",value:1336},{name:"1337",value:1337},{name:"1338",value:1338},{name:"1339",value:1339},{name:"1340",value:1340},{name:"1341",value:1341},{name:"1342",value:1342},{name:"1343",value:1343},{name:"1344",value:1344},{name:"1345",value:1345},{name:"1346",value:1346},{name:"1347",value:1347},{name:"1348",value:1348},{name:"1349",value:1349},{name:"1350",value:1350},{name:"1351",value:1351},{name:"1352",value:1352},{name:"1353",value:1353},{name:"1354",value:1354},{name:"1355",value:1355},{name:"1356",value:1356},{name:"1357",value:1357},{name:"1358",value:1358},{name:"1359",value:1359},{name:"1360",value:1360},{name:"1361",value:1361},{name:"1362",value:1362},{name:"1363",value:1363},{name:"1364",value:1364},{name:"1365",value:1365},{name:"1366",value:1366},{name:"1367",value:1367},{name:"1368",value:1368},{name:"1369",value:1369},{name:"1370",value:1370},{name:"1371",value:1371},{name:"1372",value:1372},{name:"1373",value:1373},{name:"1374",value:1374},{name:"1375",value:1375},{name:"1376",value:1376},{name:"1377",value:1377},{name:"1378",value:1378},{name:"1379",value:1379},{name:"1380",value:1380},{name:"1381",value:1381},{name:"1382",value:1382},{name:"1383",value:1383},{name:"1384",value:1384},{name:"1385",value:1385},{name:"1386",value:1386},{name:"1387",value:1387},{name:"1388",value:1388},{name:"1389",value:1389},{name:"1390",value:1390},{name:"1391",value:1391},{name:"1392",value:1392},{name:"1393",value:1393},{name:"1394",value:1394},{name:"1395",value:1395},{name:"1396",value:1396},{name:"1397",value:1397},{name:"1398",value:1398},{name:"1399",value:1399},{name:"1400",value:1400},{name:"1401",value:1401},{name:"1402",value:1402},{name:"1403",value:1403}]),Pe=t=>t<w.value,X=(t,e)=>{t&&(re.value[e]=t)},Ae=async()=>{ce.value=!0,setInterval(()=>{ce.value=!1,A.value=!1,W.value.phoneNumber=null,W.value.otp=null,w.value=1},3e3)},fe=()=>{w.value>1&&w.value--,A.value=!1,Y.value="",q.value="",J.value="",v.value.nationalCode="",W.value.otp="",W.value.phoneNumber=""},Z=Ue(()=>{var t;return!re.value[w.value]||A.value&&((t=W.value.otp)==null?void 0:t.length)!==4||w.value===3&&we.value!==b.value.totalPrice?!1:re.value[w.value].isValid}),we=Ue(()=>(x.value.cash||0)+(x.value.creditCard||0)+(x.value.cardToCard||0)),xe=()=>!value&&we.value===0||we.value===b.value.totalPrice?!0:`مجموع پرداخت‌ها باید برابر ${b.value.totalPrice.toLocaleString()} تومان باشد`,pe=async t=>{const e=re.value[w.value];if(e){const{valid:p}=await e.validate();p&&await He(t)&&w.value++}},He=async t=>{if(w.value===1)return await Ee();if(w.value===2)return!0;if(w.value===3)return t=="buy"?await qe():await Je();if(w.value===4)return!0},Oe=async()=>{try{Ce.value=!0;const t=await oe.sendOtp(W.value.phoneNumber);return A.value=!0,t}catch(t){t.response.status==401&&(localStorage.clear(),Q.replace("/login")),H.value=t.response.data.error||"خطایی رخ داده است!",h.value=!0,setTimeout(()=>{h.value=!1},1e4)}finally{Ce.value=!1}},Ee=async()=>{var t,e,p,o,_,y,S,N,z,D,B,F,L,M,$,j,G;try{_e.value=!0;const s=await oe.submitOtp(W.value);return s.data.isVerified==0?v.value.isVerified=s.data.isVerified:(v.value.id=(t=s==null?void 0:s.data)==null?void 0:t.id,v.value.isVerified=(e=s==null?void 0:s.data)==null?void 0:e.isVerified,v.value.firstName=(p=s==null?void 0:s.data)==null?void 0:p.firstName,v.value.lastName=(o=s==null?void 0:s.data)==null?void 0:o.lastName,v.value.fatherName=(_=s==null?void 0:s.data)==null?void 0:_.fatherName,v.value.gender=(y=s==null?void 0:s.data)==null?void 0:y.gender,v.value.isHaveBank=(S=s==null?void 0:s.data)==null?void 0:S.isHaveBank,v.value.nationalCode=(N=s==null?void 0:s.data)==null?void 0:N.nationalCode,v.value.birthDate=(z=s==null?void 0:s.data)==null?void 0:z.birthDate,v.value.officeName=(D=s==null?void 0:s.data)==null?void 0:D.officeName,v.value.phoneNumber=(B=s==null?void 0:s.data)==null?void 0:B.phoneNumber,v.value.wallet.balance=(L=(F=s==null?void 0:s.data)==null?void 0:F.wallet)==null?void 0:L.balance,v.value.wallet.goldWeight=($=(M=s==null?void 0:s.data)==null?void 0:M.wallet)==null?void 0:$.goldWeight,v.value.wallet.id=(G=(j=s==null?void 0:s.data)==null?void 0:j.wallet)==null?void 0:G.id),s}catch(s){s.response.status==401&&(localStorage.clear(),Q.replace("/login")),H.value=s.response.data.error||"خطایی رخ داده است!",h.value=!0,setTimeout(()=>{h.value=!1},1e4)}finally{_e.value=!1}},Ye=async()=>{try{ve.value=!0;const t=await oe.identityUser(v.value);return v.value.isVerified=t.data.isVerified,t}catch(t){t.response.status==401&&(localStorage.clear(),Q.replace("/login")),H.value=t.response.data.error||"خطایی رخ داده است!",h.value=!0,setTimeout(()=>{h.value=!1},1e4)}finally{ve.value=!1}},he=async()=>{Ke();try{me.value=!0;const t=await ml.GoldPriceByTime(m.value.milliseconds);return m.value.buyPrice=t.buyPrice,m.value.sellPrice=t.sellPrice,t}catch(t){t.response.status==401&&(localStorage.clear(),Q.replace("/login")),H.value=t.response.data.error||"خطایی رخ داده است!",h.value=!0,setTimeout(()=>{h.value=!1},1e4)}finally{me.value=!1}},qe=async()=>{var t,e,p,o,_,y,S,N,z,D,B,F,L,M,$,j,G,s,ee,le,ae,te,r,Te;try{E.value=!0,b.value.nationalCode=v.value.nationalCode,b.value.goldPrice=m.value.buyPrice;const i=await oe.CreateBuy(b.value);return n.value.type="خرید",n.value.adminId=(t=i==null?void 0:i.data)==null?void 0:t.adminId,n.value.date=(e=i==null?void 0:i.data)==null?void 0:e.date,n.value.time=(p=i==null?void 0:i.data)==null?void 0:p.time,n.value.goldPrice=(o=i==null?void 0:i.data)==null?void 0:o.goldPrice,n.value.goldWeight=(_=i==null?void 0:i.data)==null?void 0:_.goldWeight,n.value.totalPrice=(y=i==null?void 0:i.data)==null?void 0:y.totalPrice,n.value.user.firstName=(N=(S=i==null?void 0:i.data)==null?void 0:S.buyer)==null?void 0:N.firstName,n.value.user.lastName=(D=(z=i==null?void 0:i.data)==null?void 0:z.buyer)==null?void 0:D.lastName,n.value.user.fatherName=(F=(B=i==null?void 0:i.data)==null?void 0:B.buyer)==null?void 0:F.fatherName,n.value.user.nationalCode=(M=(L=i==null?void 0:i.data)==null?void 0:L.buyer)==null?void 0:M.nationalCode,n.value.user.phoneNumber=(j=($=i==null?void 0:i.data)==null?void 0:$.buyer)==null?void 0:j.phoneNumber,n.value.wallet.balance=(s=(G=i==null?void 0:i.data)==null?void 0:G.wallet)==null?void 0:s.balance,n.value.wallet.blocked=(le=(ee=i==null?void 0:i.data)==null?void 0:ee.wallet)==null?void 0:le.blocked,n.value.wallet.goldWeight=(te=(ae=i==null?void 0:i.data)==null?void 0:ae.wallet)==null?void 0:te.goldWeight,n.value.paymentMethod=(r=i==null?void 0:i.data)==null?void 0:r.paymentMethod,n.value.destCardPan=(Te=i==null?void 0:i.data)==null?void 0:Te.destCardPan,i}catch(i){i.response.status==401&&(localStorage.clear(),Q.replace("/login")),H.value=i.response.data.error||"خطایی رخ داده است!",h.value=!0,setTimeout(()=>{h.value=!1},1e4)}finally{E.value=!1}},Je=async()=>{var t,e,p,o,_,y,S,N,z,D,B,F,L,M,$,j,G,s,ee,le,ae,te;try{E.value=!0,V.value.nationalCode=v.value.nationalCode,V.value.goldPrice=m.value.buyPrice;const r=await oe.CreateSell(V.value);return n.value.type="فروش",n.value.adminId=(t=r==null?void 0:r.data)==null?void 0:t.adminId,n.value.date=(e=r==null?void 0:r.data)==null?void 0:e.date,n.value.time=(p=r==null?void 0:r.data)==null?void 0:p.time,n.value.goldPrice=(o=r==null?void 0:r.data)==null?void 0:o.goldPrice,n.value.goldWeight=(_=r==null?void 0:r.data)==null?void 0:_.goldWeight,n.value.totalPrice=(y=r==null?void 0:r.data)==null?void 0:y.totalPrice,n.value.user.firstName=(N=(S=r==null?void 0:r.data)==null?void 0:S.seller)==null?void 0:N.firstName,n.value.user.lastName=(D=(z=r==null?void 0:r.data)==null?void 0:z.seller)==null?void 0:D.lastName,n.value.user.fatherName=(F=(B=r==null?void 0:r.data)==null?void 0:B.seller)==null?void 0:F.fatherName,n.value.user.nationalCode=(M=(L=r==null?void 0:r.data)==null?void 0:L.seller)==null?void 0:M.nationalCode,n.value.user.phoneNumber=(j=($=r==null?void 0:r.data)==null?void 0:$.seller)==null?void 0:j.phoneNumber,n.value.wallet.balance=(s=(G=r==null?void 0:r.data)==null?void 0:G.wallet)==null?void 0:s.balance,n.value.wallet.blocked=(le=(ee=r==null?void 0:r.data)==null?void 0:ee.wallet)==null?void 0:le.blocked,n.value.wallet.goldWeight=(te=(ae=r==null?void 0:r.data)==null?void 0:ae.wallet)==null?void 0:te.goldWeight,r}catch(r){r.response.status==401&&(localStorage.clear(),Q.replace("/login")),H.value=r.response.data.error||"خطایی رخ داده است!",h.value=!0,setTimeout(()=>{h.value=!1},1e4)}finally{E.value=!1}},Ke=()=>{const[t,e,p]=m.value.date.split("/").map(Number),[o,_]=m.value.time.split(":").map(Number),y=vl.toGregorian(t,e,p),S=new Date(y.gy,y.gm-1,y.gd,o,_,0);m.value.milliseconds=S.getTime()},Qe=()=>{W.value.phoneNumber=W.value.phoneNumber.replace(/\D/g,"").slice(0,11)},Xe=[t=>!!t||"شماره همراه الزامی است",t=>/^09\d{9}$/.test(t)||"شماره معتبر نیست"],Ze=[t=>!!t||"کد تایید را وارد کنید",t=>(t==null?void 0:t.length)===4||"کد تایید باید ۴ رقمی باشد"],We=[t=>!!t||"کد ملی الزامی است",t=>/^\d{10}$/.test(t)||"کد ملی باید ۱۰ رقم باشد",t=>{if(!/^\d{10}$/.test(t))return!0;const e=+t[9],p=t.split("").slice(0,9).reduce((o,_,y)=>o+ +_*(10-y),0)%11;return p<2&&e===p||p>=2&&e+p===11||"کد ملی نامعتبر است"}],Ie=[t=>!!t||"مقدار ورودی نمی‌تواند خالی باشد"],el=t=>{Y.value=t,Ne()},ll=t=>{q.value=t,Ne()},al=t=>{J.value=t,Ne()},Ne=()=>{if(J.value&&q.value&&Y.value){const t=String(q.value).padStart(2,"0"),e=String(Y.value).padStart(2,"0");v.value.birthDate=`${J.value}${t}${e}`}},tl=()=>{v.value.nationalCode=v.value.nationalCode.replace(/\D/g,"").slice(0,10),We.every(t=>t(v.value.nationalCode)===!0)},K=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),ge=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),Se=t=>t.replace(/,/g,""),ul=t=>{const e=t.target.selectionStart,p=b.value.totalPrice.length,o=Se(b.value.totalPrice).replace(/[^0-9]/g,""),_=parseInt(o||0);b.value.goldWeight=(_/m.value.buyPrice).toFixed(4);const y=ge(_);b.value.totalPrice=y,De(()=>{const N=y.length-p;t.target.setSelectionRange(e+N,e+N)})},ol=()=>{b.value.goldWeight=b.value.goldWeight.replace(/[^0-9.]/g,"");const t=b.value.goldWeight.split(".");t.length>1&&(b.value.goldWeight=t[0]+"."+t.slice(1).join("")),t.length>1&&t[1].length>2&&(b.value.goldWeight=t[0]+"."+t[1].slice(0,3)),b.value.totalPrice=parseInt(b.value.goldWeight*m.value.buyPrice);const e=parseInt(b.value.goldWeight*m.value.buyPrice);b.value.totalPrice=ge(e)},dl=t=>{const e=t.target.selectionStart,p=V.value.totalPrice.length,o=Se(V.value.totalPrice).replace(/[^0-9]/g,""),_=parseInt(o||0);V.value.goldWeight=(_/m.value.sellPrice).toFixed(4);const y=ge(_);V.value.totalPrice=y,De(()=>{const N=y.length-p;t.target.setSelectionRange(e+N,e+N)})},sl=()=>{V.value.goldWeight=V.value.goldWeight.replace(/[^0-9.]/g,"");const t=V.value.goldWeight.split(".");t.length>1&&(V.value.goldWeight=t[0]+"."+t.slice(1).join("")),t.length>1&&t[1].length>2&&(V.value.goldWeight=t[0]+"."+t[1].slice(0,3)),V.value.totalPrice=parseInt(V.value.goldWeight*m.value.sellPrice);const e=parseInt(V.value.goldWeight*m.value.sellPrice);V.value.totalPrice=ge(e)};return(t,e)=>{const p=il("persian-date-picker");return g(),U(ze,null,[l(k,null,{default:a(()=>[l(d,{cols:"12"},{default:a(()=>[l(pl,{modelValue:w.value,"onUpdate:modelValue":e[26]||(e[26]=o=>w.value=o)},{default:a(()=>[l(gl,null,{default:a(()=>[(g(!0),U(ze,null,rl(Me.value,o=>(g(),C(Vl,{key:o,complete:Pe(o),title:`مرحله ${o}`,value:o,icon:Pe(o)?"ri-check-line":"ri-close-line",color:Pe(o)?"#0b8707":"#c7c3c3",class:"custom-stepper-icon"},null,8,["complete","title","value","icon","color"]))),128))]),_:1}),l(bl,null,{default:a(()=>[l(be,{value:1},{default:a(()=>[l(de,{class:"step-card"},{default:a(()=>[l(ne,{ref:o=>X(o,1)},{default:a(()=>[l(ue,null,{default:a(()=>[l(k,null,{default:a(()=>[l(d,{cols:"12"},{default:a(()=>e[28]||(e[28]=[u("div",{class:"d-flex"},[u("h3",{class:"trade-step-title"},"احراز هویت")],-1)])),_:1}),l(d,{cols:"12",md:"4",class:"d-none d-md-flex"}),l(d,{cols:"12",md:"4"},{default:a(()=>[l(R,{modelValue:W.value.phoneNumber,"onUpdate:modelValue":e[0]||(e[0]=o=>W.value.phoneNumber=o),label:"شماره همراه",variant:"outlined",rules:Xe,onInput:Qe,disabled:A.value!=!1},null,8,["modelValue","disabled"])]),_:1}),l(d,{cols:"12",md:"4",class:"d-none d-md-flex"})]),_:1}),A.value!=!1?(g(),C(k,{key:0},{default:a(()=>[l(d,{cols:"12",md:"4",class:"d-none d-md-flex"}),l(d,{cols:"12",md:"4"},{default:a(()=>[l(yl,{length:4,modelValue:W.value.otp,"onUpdate:modelValue":e[1]||(e[1]=o=>W.value.otp=o),type:"number",rules:Ze,variant:"outlined",class:"otp-input"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"4",class:"d-none d-md-flex"})]),_:1})):T("",!0)]),_:1})]),_:1},512),l(se,{class:"btn-box first-step"},{default:a(()=>[A.value==!1?(g(),C(I,{key:0,onClick:Oe,color:"primary",size:"large",variant:"elevated",disabled:!Z.value,loading:Ce.value},{default:a(()=>e[29]||(e[29]=[P(" ارسال کد تایید ")])),_:1},8,["disabled","loading"])):(g(),C(I,{key:1,onClick:pe,color:"primary",size:"large",variant:"elevated",loading:_e.value,disabled:!Z.value},{default:a(()=>e[30]||(e[30]=[P(" بعدی ")])),_:1},8,["loading","disabled"]))]),_:1})]),_:1})]),_:1}),l(be,{value:2},{default:a(()=>[l(de,{class:"step-card"},{default:a(()=>[l(ne,{ref:o=>X(o,2)},{default:a(()=>[l(ue,null,{default:a(()=>[l(k,null,{default:a(()=>[l(d,{cols:"12"},{default:a(()=>[u("div",Pl,[e[33]||(e[33]=u("h3",{class:"trade-step-title"},"اطلاعات کاربر",-1)),v.value.isVerified==1?(g(),U("div",wl,[e[31]||(e[31]=u("p",{class:"mb-0"},"کاربر احراز هویت شده است",-1)),l(O,{class:"me-2",size:"small",icon:"ri-check-line",color:"#0b8707"})])):(g(),U("div",xl,[e[32]||(e[32]=u("p",{class:"mb-0"},"کاربر احراز هویت نشده است",-1)),l(O,{class:"me-2",size:"small",icon:"ri-close-line",color:"#c9190c"})]))])]),_:1}),l(d,{cols:"12",md:"3",class:"my-3"},{default:a(()=>[v.value.isVerified!=1?(g(),C(R,{key:0,modelValue:v.value.nationalCode,"onUpdate:modelValue":e[2]||(e[2]=o=>v.value.nationalCode=o),label:"کد ملی",variant:"outlined",rules:We,onInput:tl},null,8,["modelValue"])):(g(),U("div",Nl,[e[34]||(e[34]=u("p",{class:"mb-0"},"کد ملی : ",-1)),u("p",kl,f(v.value.nationalCode),1)]))]),_:1}),v.value.isVerified!=1?(g(),C(d,{key:0,cols:"4",md:"3",class:"my-3"})):T("",!0),v.value.isVerified!=1?(g(),C(d,{key:1,cols:"4",md:"2",class:"my-3"},{default:a(()=>[l(Ve,{modelValue:Y.value,"onUpdate:modelValue":[e[3]||(e[3]=o=>Y.value=o),el],label:"روز تولد",items:je.value,variant:"outlined","item-title":"name","item-value":"value",class:"first-select",rules:[o=>!!o||"روز الزامی است"]},null,8,["modelValue","items","rules"])]),_:1})):T("",!0),v.value.isVerified!=1?(g(),C(d,{key:2,cols:"4",md:"2",class:"my-3"},{default:a(()=>[l(Ve,{modelValue:q.value,"onUpdate:modelValue":[e[4]||(e[4]=o=>q.value=o),ll],label:"ماه تولد",items:Ge.value,variant:"outlined",class:"second-select","item-title":"name","item-value":"value",rules:[o=>!!o||"ماه الزامی است"]},null,8,["modelValue","items","rules"])]),_:1})):T("",!0),v.value.isVerified!=1?(g(),C(d,{key:3,cols:"4",md:"2",class:"my-3"},{default:a(()=>[l(Ve,{modelValue:J.value,"onUpdate:modelValue":[e[5]||(e[5]=o=>J.value=o),al],label:"سال تولد",items:Re.value,variant:"outlined",class:"third-select","item-title":"name","item-value":"value",rules:[o=>!!o||"سال الزامی است"]},null,8,["modelValue","items","rules"])]),_:1})):T("",!0),v.value.isVerified==1?(g(),C(d,{key:4,cols:"12",md:"3",class:"my-3"},{default:a(()=>[u("div",hl,[e[35]||(e[35]=u("p",{class:"mb-0"},"تاریخ تولد : ",-1)),u("p",Wl,f(v.value.birthDate),1)])]),_:1})):T("",!0),l(d,{cols:"12",md:"3",class:"my-3"},{default:a(()=>[u("div",Il,[e[36]||(e[36]=u("p",{class:"mb-0"},"شماره همراه : ",-1)),u("p",Sl,f(v.value.phoneNumber),1)])]),_:1}),l(d,{cols:"12",md:"3",class:"my-3"},{default:a(()=>[u("div",Tl,[e[37]||(e[37]=u("p",{class:"mb-0"},"جنسیت : ",-1)),v.value.gender==!0?(g(),U("p",Ul,"مرد")):v.value.gender==!1?(g(),U("p",zl,"زن")):T("",!0)])]),_:1}),l(d,{cols:"12",md:"3",class:"my-3"},{default:a(()=>[u("div",Dl,[e[38]||(e[38]=u("p",{class:"mb-0"},"نام : ",-1)),u("p",Bl,f(v.value.firstName),1)])]),_:1}),l(d,{cols:"12",md:"3",class:"my-3"},{default:a(()=>[u("div",Fl,[e[39]||(e[39]=u("p",{class:"mb-0"},"نام خانوادگی : ",-1)),u("p",Ll,f(v.value.lastName),1)])]),_:1}),l(d,{cols:"12",md:"3",class:"my-3"},{default:a(()=>[u("div",Ml,[e[40]||(e[40]=u("p",{class:"mb-0"},"نام پدر : ",-1)),u("p",$l,f(v.value.fatherName),1)])]),_:1}),l(d,{cols:"12",md:"3",class:"my-3"},{default:a(()=>[u("div",jl,[e[41]||(e[41]=u("p",{class:"mb-0"},"شهر : ",-1)),u("p",Gl,f(v.value.officeName),1)])]),_:1}),l(d,{cols:"12",md:"3",class:"my-3"},{default:a(()=>[u("div",Rl,[e[42]||(e[42]=u("p",{class:"mb-0"},"کارت بانکی : ",-1)),v.value.isHaveBank==!1?(g(),C(O,{key:0,size:"small",icon:"ri-close-line",color:"#c9190c"})):v.value.isHaveBank==!0?(g(),C(O,{key:1,size:"small",icon:"ri-check-line",color:"#0b8707"})):T("",!0)])]),_:1}),l(d,{cols:"12",md:"3",class:"my-3"},{default:a(()=>[u("div",Al,[e[43]||(e[43]=u("p",{class:"mb-0"},"موجودی صندوق طلا : ",-1)),u("p",Hl,f(v.value.wallet.goldWeight),1)])]),_:1})]),_:1})]),_:1})]),_:1},512),l(se,{class:"btn-box"},{default:a(()=>[l(I,{onClick:fe,size:"large"},{default:a(()=>e[44]||(e[44]=[P("قبلی")])),_:1}),v.value.isVerified!=1?(g(),C(I,{key:0,onClick:Ye,color:"primary",size:"large",variant:"elevated",disabled:!Z.value,loading:ve.value},{default:a(()=>e[45]||(e[45]=[P(" استعلام هویت ")])),_:1},8,["disabled","loading"])):(g(),C(I,{key:1,onClick:pe,color:"primary",size:"large",variant:"elevated",loading:ve.value},{default:a(()=>e[46]||(e[46]=[P(" بعدی ")])),_:1},8,["loading"]))]),_:1})]),_:1})]),_:1}),l(be,{value:3},{default:a(()=>[l(de,{class:"step-card"},{default:a(()=>[l(_l,{modelValue:ie.value,"onUpdate:modelValue":e[6]||(e[6]=o=>ie.value=o)},{default:a(()=>[l(Be,{value:"one"},{default:a(()=>e[47]||(e[47]=[P("خرید")])),_:1}),l(Be,{value:"two"},{default:a(()=>e[48]||(e[48]=[P("فروش")])),_:1})]),_:1},8,["modelValue"]),l(Cl,{modelValue:ie.value,"onUpdate:modelValue":e[25]||(e[25]=o=>ie.value=o)},{default:a(()=>[l(Fe,{value:"one"},{default:a(()=>[l(ne,{ref:o=>X(o,3)},{default:a(()=>[l(ue,null,{default:a(()=>[l(k,null,{default:a(()=>[l(d,{cols:"12"},{default:a(()=>e[49]||(e[49]=[u("div",{class:"w-100 d-flex justify-space-between align-items-center"},[u("h3",{class:"trade-step-title"},"ثبت خرید")],-1)])),_:1})]),_:1}),l(k,{class:"mb-4"},{default:a(()=>[l(d,{cols:"12",md:"3"},{default:a(()=>[l(p,{modelValue:m.value.date,"onUpdate:modelValue":e[7]||(e[7]=o=>m.value.date=o),placeholder:"تاریخ"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:a(()=>[l(p,{type:"time",modelValue:m.value.time,"onUpdate:modelValue":e[8]||(e[8]=o=>m.value.time=o),placeholder:"زمان"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:a(()=>[u("div",Ol,[e[50]||(e[50]=u("p",null,"قیمت طلا : ",-1)),u("p",null,f(K(m.value.buyPrice))+" تومان",1)])]),_:1}),l(d,{cols:"12",md:"3"},{default:a(()=>[l(I,{onClick:he,class:"h-100 py-2",color:"primary",size:"large",variant:"elevated",block:"",loading:me.value},{default:a(()=>e[51]||(e[51]=[P(" استعلام قیمت طلا ")])),_:1},8,["loading"])]),_:1})]),_:1}),l(k,{class:"my-4"},{default:a(()=>[l(d,{cols:"12",md:"3"},{default:a(()=>[l(R,{modelValue:b.value.totalPrice,"onUpdate:modelValue":e[9]||(e[9]=o=>b.value.totalPrice=o),label:"مبلغ (تومان)",variant:"outlined",onInput:ul,disabled:m.value.buyPrice==""},null,8,["modelValue","disabled"])]),_:1}),l(d,{cols:"12",md:"2"},{default:a(()=>[u("div",El,[l(O,{class:"me-2",size:"small",icon:"ri-arrow-left-right-line",color:"#0b8707"})])]),_:1}),l(d,{cols:"12",md:"3"},{default:a(()=>[l(R,{modelValue:b.value.goldWeight,"onUpdate:modelValue":e[10]||(e[10]=o=>b.value.goldWeight=o),label:"وزن (گرم)",variant:"outlined",rules:Ie,onInput:ol,disabled:m.value.buyPrice==""},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(ye,{class:"my-4"}),l(k,{class:"my-4"},{default:a(()=>[l(d,{cols:"6",md:"4",class:"my-2"},{default:a(()=>[u("div",Yl,[l(ke,{modelValue:x.value.cash,"onUpdate:modelValue":e[11]||(e[11]=o=>x.value.cash=o),label:"مبلغ نقد (تومان)",variant:"outlined",class:"my-2",rules:[xe]},null,8,["modelValue","rules"]),l(R,{modelValue:x.value.cashId,"onUpdate:modelValue":e[12]||(e[12]=o=>x.value.cashId=o),label:"شناسه",variant:"outlined",class:"my-2"},null,8,["modelValue"])])]),_:1}),l(d,{cols:"6",md:"4",class:"my-2"},{default:a(()=>[u("div",ql,[l(ke,{modelValue:x.value.creditCard,"onUpdate:modelValue":e[13]||(e[13]=o=>x.value.creditCard=o),label:"دستگاه پوز (تومان)",variant:"outlined",rules:[xe],class:"my-2"},null,8,["modelValue","rules"]),l(R,{modelValue:x.value.creditCardId,"onUpdate:modelValue":e[14]||(e[14]=o=>x.value.creditCardId=o),label:"شناسه",variant:"outlined",class:"my-2"},null,8,["modelValue"])])]),_:1}),l(d,{cols:"6",md:"4",class:"my-2"},{default:a(()=>[u("div",Jl,[l(ke,{modelValue:x.value.cardToCard,"onUpdate:modelValue":e[15]||(e[15]=o=>x.value.cardToCard=o),label:"کارت به کارت(تومان)",variant:"outlined",rules:[xe],class:"my-2"},null,8,["modelValue","rules"]),u("div",Kl,[l(Ve,{modelValue:x.value.cardToCardId,"onUpdate:modelValue":e[16]||(e[16]=o=>x.value.cardToCardId=o),items:$e.value,label:"شماره کارت",variant:"outlined","item-title":"label","item-value":"label",class:"my-2"},null,8,["modelValue","items"])])])]),_:1})]),_:1}),l(ye,{class:"my-4"}),l(k,{class:"mt-4"},{default:a(()=>[l(d,{cols:"12"},{default:a(()=>[l(Le,{label:"توضیحات (اختیاری)",variant:"outlined",modelValue:b.value.description,"onUpdate:modelValue":e[17]||(e[17]=o=>b.value.description=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},512),l(se,{class:"btn-box"},{default:a(()=>[l(I,{onClick:fe,size:"large"},{default:a(()=>e[52]||(e[52]=[P("قبلی")])),_:1}),l(I,{onClick:e[18]||(e[18]=o=>pe("buy")),color:"primary",size:"large",variant:"elevated",disabled:!Z.value,loading:E.value},{default:a(()=>e[53]||(e[53]=[P(" خرید نهایی ")])),_:1},8,["disabled","loading"])]),_:1})]),_:1}),l(Fe,{value:"two"},{default:a(()=>[l(ne,{ref:o=>X(o,3)},{default:a(()=>[l(ue,null,{default:a(()=>[l(k,null,{default:a(()=>[l(d,{cols:"12"},{default:a(()=>e[54]||(e[54]=[u("div",{class:"w-100 d-flex justify-space-between align-items-center"},[u("h3",{class:"trade-step-title"},"ثبت فروش")],-1)])),_:1})]),_:1}),l(k,{class:""},{default:a(()=>[l(d,{cols:"12",md:"3"},{default:a(()=>[l(p,{modelValue:m.value.date,"onUpdate:modelValue":e[19]||(e[19]=o=>m.value.date=o),placeholder:"تاریخ"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:a(()=>[l(p,{type:"time",modelValue:m.value.time,"onUpdate:modelValue":e[20]||(e[20]=o=>m.value.time=o),placeholder:"زمان"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",md:"3"},{default:a(()=>[u("div",Ql,[e[55]||(e[55]=u("p",null,"قیمت طلا : ",-1)),u("p",null,f(K(m.value.sellPrice))+" تومان",1)])]),_:1}),l(d,{cols:"12",md:"3"},{default:a(()=>[l(I,{onClick:he,class:"h-100",color:"primary",size:"large",variant:"elevated",block:"",loading:me.value},{default:a(()=>e[56]||(e[56]=[P(" استعلام قیمت طلا ")])),_:1},8,["loading"])]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(d,{cols:"12",md:"3"},{default:a(()=>[l(R,{modelValue:V.value.totalPrice,"onUpdate:modelValue":e[21]||(e[21]=o=>V.value.totalPrice=o),label:"مبلغ (تومان)",variant:"outlined",onInput:dl,disabled:m.value.sellPrice==""},null,8,["modelValue","disabled"])]),_:1}),l(d,{cols:"12",md:"2"},{default:a(()=>[u("div",Xl,[l(O,{class:"me-2",size:"small",icon:"ri-arrow-left-right-line",color:"#0b8707"})])]),_:1}),l(d,{cols:"12",md:"3"},{default:a(()=>[l(R,{modelValue:V.value.goldWeight,"onUpdate:modelValue":e[22]||(e[22]=o=>V.value.goldWeight=o),label:"وزن (گرم)",variant:"outlined",rules:Ie,onInput:sl,disabled:m.value.sellPrice==""},null,8,["modelValue","disabled"])]),_:1}),l(d,{cols:"12"},{default:a(()=>[l(Le,{label:"توضیحات (اختیاری)",variant:"outlined",modelValue:V.value.description,"onUpdate:modelValue":e[23]||(e[23]=o=>V.value.description=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},512),l(se,{class:"btn-box"},{default:a(()=>[l(I,{onClick:fe,size:"large"},{default:a(()=>e[57]||(e[57]=[P("قبلی")])),_:1}),l(I,{onClick:e[24]||(e[24]=o=>pe("sell")),color:"primary",size:"large",variant:"elevated",disabled:!Z.value,loading:E.value},{default:a(()=>e[58]||(e[58]=[P(" فروش نهایی ")])),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(be,{value:4},{default:a(()=>[l(de,{class:"step-card"},{default:a(()=>[l(ne,{ref:o=>X(o,4)},{default:a(()=>[l(ue,null,{default:a(()=>[l(k,null,{default:a(()=>[l(d,{cols:"12"},{default:a(()=>[u("div",Zl,[u("h3",ea,"فاکتور "+f(n.value.type),1)])]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(d,{cols:"12"},{default:a(()=>e[59]||(e[59]=[u("div",{class:"d-flex"},[u("h4",null,"اطلاعات کاربر")],-1)])),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",la,[e[60]||(e[60]=u("p",null,"نام : ",-1)),u("p",null,f(n.value.user.firstName),1)])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",aa,[e[61]||(e[61]=u("p",null,"نام خانوادگی : ",-1)),u("p",null,f(n.value.user.lastName),1)])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",ta,[e[62]||(e[62]=u("p",null,"نام پدر : ",-1)),u("p",null,f(n.value.user.fatherName),1)])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",ua,[e[63]||(e[63]=u("p",null,"کد ملی : ",-1)),u("p",null,f(n.value.user.nationalCode),1)])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",oa,[e[64]||(e[64]=u("p",null," شماره همراه : ",-1)),u("p",null,f(n.value.user.phoneNumber),1)])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",da,[e[65]||(e[65]=u("p",null,"کارشناس : ",-1)),u("p",null,f(n.value.adminId),1)])]),_:1}),l(ye),l(d,{cols:"12"},{default:a(()=>e[66]||(e[66]=[u("div",{class:"d-flex"},[u("h4",null,"اطلاعات معامله")],-1)])),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",sa,[e[67]||(e[67]=u("p",null,"وزن طلا : ",-1)),u("p",null,f(n.value.goldWeight)+" گرم",1)])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",na,[e[68]||(e[68]=u("p",null,"قیمت طلا : ",-1)),u("p",null,f(K(n.value.goldPrice))+" تومان",1)])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",ia,[e[69]||(e[69]=u("p",null,"قیمت کل : ",-1)),u("p",null,f(K(n.value.totalPrice))+" تومان",1)])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",ra,[e[70]||(e[70]=u("p",null,"نوع پرداخت : ",-1)),n.value.paymentMethod==1?(g(),U("p",va,"کارت به کارت")):n.value.paymentMethod==2?(g(),U("p",ma,"دستگاه پوز")):n.value.paymentMethod==3?(g(),U("p",ca,"نقدی")):T("",!0)])]),_:1}),n.value.destCardPan!=""?(g(),C(d,{key:0,cols:"12",md:"6"},{default:a(()=>[u("div",fa,[e[71]||(e[71]=u("p",null,"مقصد کارت به کارت: ",-1)),u("p",null,f(n.value.destCardPan),1)])]),_:1})):T("",!0),l(ye),l(d,{cols:"12"},{default:a(()=>e[72]||(e[72]=[u("div",{class:"d-flex"},[u("h4",null,"اطلاعات کیف پول")],-1)])),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",pa,[e[73]||(e[73]=u("p",null," موجودی کیف پول : ",-1)),u("p",null,f(K(n.value.wallet.balance))+" تومان",1)])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",ga,[e[74]||(e[74]=u("p",null,"دارایی طلا: ",-1)),u("p",null,f(n.value.wallet.goldWeight)+" گرم",1)])]),_:1}),l(d,{cols:"6",md:"3"},{default:a(()=>[u("div",ba,[e[75]||(e[75]=u("p",null,"مبلغ در انتظار برداشت : ",-1)),u("p",null,f(K(n.value.wallet.blocked))+" تومان",1)])]),_:1})]),_:1})]),_:1})]),_:1},512),l(se,{class:"btn-box"},{default:a(()=>[l(I,{onClick:fe,size:"large"},{default:a(()=>e[76]||(e[76]=[P("قبلی")])),_:1}),l(I,{onClick:Ae,color:"primary",size:"large",variant:"elevated"},{default:a(()=>e[77]||(e[77]=[P(" اتمام نمایش ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),h.value?(g(),C(cl,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:a(()=>[P(f(H.value),1)]),_:1})):T("",!0),l(fl,{modelValue:ce.value,"onUpdate:modelValue":e[27]||(e[27]=o=>ce.value=o),"max-width":"500",persistent:""},{default:a(()=>[l(de,{title:"تایید فاکتور",class:"modal-card"},{default:a(()=>[l(O,{class:"mt-3 mb-6",icon:"ri-checkbox-circle-fill",color:"#0b8707"}),u("h4",null," فاکتور "+f(n.value.user.firstName)+" "+f(n.value.user.lastName)+" با موفقیت ثبت شد ",1)]),_:1})]),_:1},8,["modelValue"])],64)}}},Oa=nl(Va,[["__scopeId","data-v-2314f95d"]]);export{Oa as default};
