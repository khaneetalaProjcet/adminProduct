import{ad as B,_ as Y,r as d,j as Z,k as ee,c as k,b as l,w as t,a7 as se,F as S,a0 as D,o as u,a1 as h,a2 as n,C as E,V as m,e as c,h as I,a as s,a6 as H,a4 as M,t as o}from"./index-YxbGW_Kj.js";import{S as le}from"./api-kDFbBZn5.js";import{l as te}from"./lodash-C-NmlqkS.js";import{V as $}from"./VDialog-CWT8fy8q.js";import{V as ae,a as A,b as oe,c as L}from"./VTabs-DqbHEzrm.js";import{a as re,V as w,b as F}from"./VCard-BerrSmZ6.js";import{V as q}from"./VTextField-DQFwgkkF.js";import{V as G}from"./VDataTable-DFYVGawG.js";import{a as ne}from"./VSelect-Cz9fscAG.js";import{V as O}from"./VSpacer-CTYYkv7Y.js";import{V as T}from"./VDivider-DZ9MTMdX.js";import"./dialog-transition-BEUVCgXp.js";import"./index-s-_os7y2.js";import"./index-CfYn4Jym.js";import"./VWindowItem-L279gGme.js";import"./VMenu-xc3l3-Js.js";import"./createSimpleFunctional-DAMy-n7r.js";import"./VAvatar-a9mkcHnl.js";import"./VImg-BLJdCowe.js";import"./VSelectionControl-B5wK-S_z.js";const W={async AllStatus(){return(await le.get("/logger/status")).data},async transfer(f){return(await B.get(`/trlog?search=${f}`)).data},async transferDetail(f){return(await B.get(`/analyze/${f}`)).data}},ie={class:"pa-5"},de={class:"pa-5"},ue={class:"d-flex align-center justify-between"},ce={class:"mx-2"},me={class:"d-flex align-center justify-between"},fe={class:"mx-2"},ve={class:"d-flex align-center justify-between"},pe={class:"mx-2"},xe={class:"d-flex align-center justify-between"},_e={class:"mx-2"},ge={class:"d-flex align-center justify-between"},ye={class:"mx-2"},Ve={class:"d-flex align-center justify-between"},ke={class:"mx-2"},we={class:"d-flex align-center justify-between"},be={class:"mx-2"},Ce={class:"d-flex align-center justify-between"},Se={class:"mx-2"},De={class:"d-flex justify-space-between align-items-center flex-wrap"},he={class:"d-flex mx-2"},Te={class:"mx-1"},We={class:"d-flex mx-2"},je={class:"mx-1"},Ne={class:"d-flex mx-2"},Ue={class:"mx-1"},ze={class:"d-flex mx-2"},Be={class:"mx-1"},Ee={class:"d-flex mx-2"},Ie={class:"mx-1"},He={class:"d-flex mx-2"},Me={class:"mx-1"},$e={class:"d-flex mx-2"},Ae={class:"mx-1"},Le={class:"d-flex mx-2"},Fe={class:"mx-1"},qe={class:"d-flex mx-2"},Ge={class:"mx-1"},Oe={class:"d-flex mx-2"},Pe={class:"mx-1"},Qe={class:"d-flex mx-2"},Re={class:"mx-1"},Je={class:"d-flex mx-2"},Ke={class:"mx-1"},Xe={__name:"serverMonitorView",setup(f){const v=d(!1),j=d(),x=d(null),P=d([{title:"service name",key:"service"},{title:"status",key:"status"},{title:"request count",key:"total.all"},{title:"request count",key:"total.all"},{title:"success",key:"total.statusCount.success"},{title:"failed",key:"total.statusCount.failed"},{title:"internalIssues",key:"total.statusCount.internalIssues"},{title:"error",key:"error"}]),b=d(null),N=d(),_=d(!1),g=d(""),U=d(),i=d(""),Q=d([{title:"نام",key:"firstName"},{title:"نام خانوادگی",key:"lastName"},{title:"شماره همراه",key:"phoneNumber"},{title:"کد ملی",key:"nationalCode"},{title:"شهر",key:"officeName"},{title:"کارت بانکی",key:"isHaveBank"},{title:"انتقال یافته",key:"oldUserCheck"},{title:"فعالیت",key:"action"}]),C=d(),y=d(),V=d(!1),R=async()=>{try{v.value=!0;const r=await W.AllStatus();return j.value=r.data,r}catch(r){r.response.status==401&&(localStorage.clear(),D.replace("/login")),errorMsg.value=r.response.data.error||"خطایی رخ داده است!",alertError.value=!0,setTimeout(()=>{alertError.value=!1},1e4)}finally{v.value=!1}},z=async()=>{try{C.value=!0;const r=await W.transfer(g.value);return U.value=r,r}catch(r){r.response.status==401&&(localStorage.clear(),D.replace("/login")),errorMsg.value=r.response.data.error||"خطایی رخ داده است!",alertError.value=!0,setTimeout(()=>{alertError.value=!1},1e4)}finally{C.value=!1}},J=r=>{V.value=!0,K(r.id)},K=async r=>{try{y.value=!0;const e=await W.transferDetail(r);return i.value=e,e}catch(e){e.response.status==401&&(localStorage.clear(),D.replace("/login")),errorMsg.value=e.response.data.error||"خطایی رخ داده است!",alertError.value=!0,setTimeout(()=>{alertError.value=!1},1e4)}finally{y.value=!1}},X=r=>{_.value=!0,N.value=r.total.error};return Z(g,te.debounce(()=>{z()},1e3)),ee(()=>{R(),z()}),(r,e)=>(u(),k(S,null,[l(se,null,{default:t(()=>[l(h,null,{default:t(()=>[l(n,null,{default:t(()=>[l(ae,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),"align-tabs":"center"},{default:t(()=>[l(A,{value:"one"},{default:t(()=>e[8]||(e[8]=[E("مانیتور سرور")])),_:1}),l(A,{value:"two"},{default:t(()=>e[9]||(e[9]=[E("مانیتور انتقال")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(n,{cols:"12"},{default:t(()=>[l(re,null,{default:t(()=>[l(oe,{modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=a=>x.value=a)},{default:t(()=>[l(L,{value:"one"},{default:t(()=>[l(w,{title:"سرویس ها"},{text:t(()=>[l(q,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=a=>b.value=a),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:t(()=>[l(G,{headers:P.value,items:j.value,search:b.value,loading:v.value},{"item.status":t(({item:a})=>[l(ne,{text:a.status==0?"DOWN":"UP",color:a.status==0?"#ff0000":"#43A047",size:"small"},null,8,["text","color"])]),"item.error":t(({item:a})=>[l(m,{class:"me-2",size:"small",icon:"ri-signal-wifi-error-line",color:"#d4af37",onClick:p=>X(a)},null,8,["onClick"])]),_:1},8,["headers","items","search","loading"])]),_:1})]),_:1}),l(L,{value:"two"},{default:t(()=>[l(w,{title:"انتقال ها"},{text:t(()=>[l(q,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value=a),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:t(()=>[l(G,{headers:Q.value,items:U.value,loading:C.value},{"item.isHaveBank":t(({item:a})=>[a.isHaveBank==!1?(u(),c(m,{key:0,size:"small",icon:"ri-close-line",color:"#c9190c"})):a.isHaveBank==!0?(u(),c(m,{key:1,size:"small",icon:"ri-check-line",color:"#0b8707"})):I("",!0)]),"item.oldUserCheck":t(({item:a})=>[a.oldUserCheck==!1?(u(),c(m,{key:0,size:"small",icon:"ri-close-line",color:"#c9190c"})):a.oldUserCheck==!0?(u(),c(m,{key:1,size:"small",icon:"ri-check-line",color:"#0b8707"})):I("",!0)]),"item.action":t(({item:a})=>[l(m,{class:"me-2",size:"small",icon:"ri-exchange-funds-line",color:"#c9190c",loading:y.value,onClick:p=>J(a)},null,8,["loading","onClick"])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l($,{modelValue:_.value,"onUpdate:modelValue":e[5]||(e[5]=a=>_.value=a),"max-width":"500",class:"error-dialog"},{default:t(()=>[l(w,{class:"dialog-card"},{default:t(()=>[s("div",ie,[(u(!0),k(S,null,H(N.value,(a,p)=>(u(),k("div",{key:p},[s("p",null,o(a),1),l(T)]))),128))]),l(F,null,{default:t(()=>[l(O),l(M,{text:"close",onClick:e[4]||(e[4]=a=>_.value=!1),size:"large",class:"m-3"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l($,{modelValue:V.value,"onUpdate:modelValue":e[7]||(e[7]=a=>V.value=a),"max-width":"500",class:"error-dialog"},{default:t(()=>[l(w,{class:"dialog-card"},{default:t(()=>[e[31]||(e[31]=s("div",{class:"k-dialog-title"},[s("p",null,"احراز هویت")],-1)),s("div",de,[y.value==!0?(u(),c(h,{key:0},{default:t(()=>[l(n,{cols:"12"},{default:t(()=>e[10]||(e[10]=[s("div",{class:"d-flex justify-center align-center"},[s("p",null,"لطفا منتظر بمانید ...")],-1)])),_:1})]),_:1})):(u(),c(h,{key:1},{default:t(()=>[l(n,{cols:"6"},{default:t(()=>[s("div",ue,[e[11]||(e[11]=s("p",{class:"mx-2"},"تعداد انتقال:",-1)),s("p",ce,o(i.value.logs.length),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",me,[e[12]||(e[12]=s("p",{class:"mx-2"},"حجم خرید:",-1)),s("p",fe,o(i.value.allBuys),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",ve,[e[13]||(e[13]=s("p",{class:"mx-2"},"حجم فروش:",-1)),s("p",pe,o(i.value.allSels),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",xe,[e[14]||(e[14]=s("p",{class:"mx-2"},"موجودی ریالی:",-1)),s("p",_e,o(i.value.balance),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",ge,[e[15]||(e[15]=s("p",{class:"mx-2"},"حجم واریز:",-1)),s("p",ye,o(i.value.dep),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",Ve,[e[16]||(e[16]=s("p",{class:"mx-2"},"حجم خالص خرید:",-1)),s("p",ke,o(i.value.goldW),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",we,[e[17]||(e[17]=s("p",{class:"mx-2"},"موجودی صندوق طلا:",-1)),s("p",be,o(i.value.mainWallet),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",Ce,[e[18]||(e[18]=s("p",{class:"mx-2"},"برداشت:",-1)),s("p",Se,o(i.value.withd),1)])]),_:1}),l(T,{class:"my-3"}),(u(!0),k(S,null,H(i.value.logs,(a,p)=>(u(),c(n,{cols:"12",key:p},{default:t(()=>[s("div",De,[s("div",he,[e[19]||(e[19]=s("p",{class:"mx-1"},"founded:",-1)),s("p",Te,o(a.founded),1)]),s("div",We,[e[20]||(e[20]=s("p",{class:"mx-1"},"weight:",-1)),s("p",je,o(a.weight),1)]),s("div",Ne,[e[21]||(e[21]=s("p",{class:"mx-1"},"nationalCode:",-1)),s("p",Ue,o(a.nationalCode),1)]),s("div",ze,[e[22]||(e[22]=s("p",{class:"mx-1"},"userId:",-1)),s("p",Be,o(a.userId),1)]),s("div",Ee,[e[23]||(e[23]=s("p",{class:"mx-1"},"date:",-1)),s("p",Ie,o(a.date),1)]),s("div",He,[e[24]||(e[24]=s("p",{class:"mx-1"},"time:",-1)),s("p",Me,o(a.time),1)])]),l(T)]),_:2},1024))),128)),l(n,{cols:"6"},{default:t(()=>[s("div",$e,[e[25]||(e[25]=s("p",{class:"mx-1"},"verificationStatus:",-1)),s("p",Ae,o(i.value.oldWe.verificationStatus),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",Le,[e[26]||(e[26]=s("p",{class:"mx-1"},"nationalCode:",-1)),s("p",Fe,o(i.value.oldWe.nationalCode),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",qe,[e[27]||(e[27]=s("p",{class:"mx-1"},"phoneNumber:",-1)),s("p",Ge,o(i.value.oldWe.phoneNumber),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",Oe,[e[28]||(e[28]=s("p",{class:"mx-1"},"validData:",-1)),s("p",Pe,o(i.value.oldWe.validData),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",Qe,[e[29]||(e[29]=s("p",{class:"mx-1"},"wallet:",-1)),s("p",Re,o(i.value.oldWe.wallet.goldWeight),1)])]),_:1}),l(n,{cols:"6"},{default:t(()=>[s("div",Je,[e[30]||(e[30]=s("p",{class:"mx-1"},"verificationStatus:",-1)),s("p",Ke,o(i.value.oldWe.verificationStatus),1)])]),_:1})]),_:1}))]),l(F,null,{default:t(()=>[l(O),l(M,{text:"بستن",onClick:e[6]||(e[6]=a=>V.value=!1),size:"large",class:"m-3"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},gs=Y(Xe,[["__scopeId","data-v-da0c754e"]]);export{gs as default};
