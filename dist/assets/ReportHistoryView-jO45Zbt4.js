import{_ as H,r as i,i as $,c as v,a as l,b as n,w as t,a5 as A,e as u,j as o,F as I,at as M,o as s,$ as b,a0 as m,D as f,t as c,V as g,Y as D}from"./index-CyIPDMA0.js";import{R as U}from"./report-BzbtjaPu.js";import{V as j}from"./VDialog-y7jRVlLV.js";import{V as w}from"./VAlert-c2Xh6sRU.js";import{V as z}from"./VCard-CpKpSK2R.js";import{V as G}from"./VTextField-BmDdLcfQ.js";import{V as J}from"./VDataTable-BBFTlZKX.js";import{V as C}from"./VTooltip-BJBLODkt.js";import{V as p}from"./VChip-37LD3gII.js";import"./api-uSrBEOlK.js";import"./dialog-transition-B5uGIojj.js";import"./index-D0DI_bP6.js";import"./index-DJvXiB9-.js";import"./createSimpleFunctional-CsFIsvyw.js";import"./VAvatar-_3tRIEOC.js";import"./VImg-C0-5YD56.js";import"./VSelect-k8H4_uKB.js";import"./VMenu-g3ioRk01.js";import"./ssrBoot-1VN9aF2i.js";import"./VDivider-Ce_K68Eo.js";import"./VSelectionControl-hmh9lmbJ.js";import"./VSlideGroup-BrepB4cg.js";const O={class:"d-flex"},P={class:"d-flex align-center py-6"},Y={class:"d-flex align-center py-6"},q={key:0},K={key:1},Q={key:2},W={class:"d-flex align-center py-6"},X={key:0},Z={key:1},ee={key:2},te={key:3},ae={class:"d-flex align-center py-6"},le={class:"d-flex align-center py-6"},se={class:"d-flex align-center py-6"},oe={class:"d-flex align-center py-6"},re={class:"d-flex align-center py-6"},ne={__name:"ReportHistoryView",setup(ie){const k=i(""),T=i(""),_=i(!1),h=i(""),L=i(!1);i(!1),i(!1);const B=i([{title:"تاریخ",key:"date"},{title:"زمان",key:"time"},{title:"نوع گزارش",key:"reportType"},{title:"گزارش گیرنده",key:"fullName"},{title:"وضعیت",key:"status"},{title:"فعالیت",key:"action"}]);i({firstName:null,lastName:null,phoneNumber:null}),i(!1),i(!1);const R=i([]),V=i(!1),x=i(!1),a=i({auth:"-",deal:"-",endDate:"-",endTime:"-",nationalCode:"-",report:"-",startDate:"-",startTime:"-",status:"-",type:"-"}),F=async()=>{try{V.value=!0;const d=await U.ReportHistoryList();return R.value=d.data,d}catch(d){d.response.status==401&&(localStorage.clear(),M.replace("/login")),T.value=d.response.data.error||"خطایی رخ داده است!",_.value=!0,setTimeout(()=>{_.value=!1},1e4)}finally{V.value=!1}},S=d=>{window.location.href=d.link},E=d=>{x.value=!0;let e=JSON.parse(d.reportBody);a.value.auth=e.auth,a.value.deal=e.deal,a.value.endDate=e.endDate,a.value.endTime=e.endTime,a.value.nationalCode=e.nationalCode,a.value.report=e.report,a.value.startDate=e.startDate,a.value.startTime=e.startTime,a.value.status=e.status,a.value.type=e.type};return $(()=>{F()}),(d,e)=>(s(),v(I,null,[l("div",null,[n(A,null,{default:t(()=>[n(b,null,{default:t(()=>[n(m,{cols:"12"},{default:t(()=>[n(z,{title:"تاریخچه گزارشات"},{text:t(()=>[n(G,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=r=>k.value=r),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:t(()=>[n(J,{headers:B.value,items:R.value,search:k.value,loading:V.value},{"item.fullName":t(({item:r})=>[f(c(r.firstName)+" "+c(r.lastName),1)]),"item.status":t(({item:r})=>[r.status==0?(s(),u(p,{key:0,text:"در انتظار پردازش",color:"#1A237E",size:"small"})):o("",!0),r.status==1?(s(),u(p,{key:1,text:"در حال پردازش",color:"#F9A825",size:"small"})):o("",!0),r.status==2?(s(),u(p,{key:2,text:"پردازش شده",color:"#2E7D32",size:"small"})):o("",!0),r.status==3?(s(),u(p,{key:3,text:"به مشکل خورده",color:"#B71C1C",size:"small"})):o("",!0)]),"item.reportType":t(({item:r})=>[r.reportType==1?(s(),u(p,{key:0,text:"واریز و برداشت",size:"small"})):o("",!0),r.reportType==2?(s(),u(p,{key:1,text:"معاملات",size:"small"})):o("",!0),r.reportType==3?(s(),u(p,{key:2,text:"کاربران",size:"small"})):o("",!0)]),"item.action":t(({item:r})=>[n(C,{text:"جزئیات",location:"top"},{activator:t(({props:y})=>[n(g,D({class:"me-2",size:"small",icon:"ri-information-line",color:"#d4af37"},y,{onClick:N=>E(r)}),null,16,["onClick"])]),_:2},1024),r.status==2?(s(),u(C,{key:0,text:"دانلود",location:"top"},{activator:t(({props:y})=>[n(g,D({class:"me-2",size:"small",icon:"ri-download-2-line",color:"#2E7D32"},y,{onClick:N=>S(r)}),null,16,["onClick"])]),_:2},1024)):o("",!0),r.status==3?(s(),u(C,{key:1,text:"پردازش مجدد",location:"top"},{activator:t(({props:y})=>[n(g,D({class:"me-2",size:"small",icon:"ri-repeat-line",color:"#D32F2F"},y,{onClick:N=>d.ReportRepeat(r)}),null,16,["onClick"])]),_:2},1024)):o("",!0)]),_:1},8,["headers","items","search","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),n(j,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=r=>x.value=r),"max-width":"600",class:"dialog"},{default:t(()=>[n(z,{class:"dialog-card"},{default:t(()=>[e[13]||(e[13]=l("div",{class:"k-dialog-title"},[l("p",null,"جزئیات گزارش")],-1)),l("div",O,[n(b,null,{default:t(()=>[n(m,{cols:"6",md:"4"},{default:t(()=>[l("div",P,[e[5]||(e[5]=l("span",null,"نوع گزارش:",-1)),a.value.report==1?(s(),u(p,{key:0,size:"small"},{default:t(()=>e[2]||(e[2]=[f("واریز و برداشت")])),_:1})):o("",!0),a.value.report==2?(s(),u(p,{key:1},{default:t(()=>e[3]||(e[3]=[f("معاملات")])),_:1})):o("",!0),a.value.report==3?(s(),u(p,{key:2},{default:t(()=>e[4]||(e[4]=[f("کاربران")])),_:1})):o("",!0)])]),_:1}),a.value.report==3?(s(),u(m,{key:0,cols:"6",md:"4"},{default:t(()=>[l("div",Y,[e[6]||(e[6]=l("span",null,"وضعیت احراز:",-1)),a.value.auth=="approved"?(s(),v("span",q,"احراز هویت شده")):o("",!0),a.value.auth=="approved"?(s(),v("span",K,"احراز هویت نشده")):o("",!0),a.value.auth=="approved"?(s(),v("span",Q,"تمامی کاربران")):o("",!0)])]),_:1})):o("",!0),n(m,{cols:"6",md:"4"},{default:t(()=>[l("div",W,[e[7]||(e[7]=l("span",null,"وضعیت معامله:",-1)),a.value.status=="completed"?(s(),v("span",X,"موفق")):o("",!0),a.value.status=="pending"?(s(),v("span",Z,"در انتظار")):o("",!0),a.value.status=="failed"?(s(),v("span",ee,"ناموفق")):o("",!0),a.value.status=="all"?(s(),v("span",te,"همه")):o("",!0)])]),_:1}),n(m,{cols:"6",md:"4"},{default:t(()=>[l("div",ae,[e[8]||(e[8]=l("span",null,"کد ملی:",-1)),l("span",null,c(a.value.nationalCode),1)])]),_:1}),n(m,{cols:"6",md:"4"},{default:t(()=>[l("div",le,[e[9]||(e[9]=l("span",null,"تاریخ شروع:",-1)),l("span",null,c(a.value.startDate),1)])]),_:1}),n(m,{cols:"6",md:"4"},{default:t(()=>[l("div",se,[e[10]||(e[10]=l("span",null,"زمان شروع:",-1)),l("span",null,c(a.value.startTime),1)])]),_:1}),n(m,{cols:"6",md:"4"},{default:t(()=>[l("div",oe,[e[11]||(e[11]=l("span",null,"تاریخ پایان:",-1)),l("span",null,c(a.value.endDate),1)])]),_:1}),n(m,{cols:"6",md:"4"},{default:t(()=>[l("div",re,[e[12]||(e[12]=l("span",null,"زمان پایان:",-1)),l("span",null,c(a.value.endTime),1)])]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"]),_.value?(s(),u(w,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:t(()=>[f(c(T.value),1)]),_:1})):o("",!0),L.value?(s(),u(w,{key:1,color:"success",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:t(()=>[f(c(h.value),1)]),_:1})):o("",!0)],64))}},Le=H(ne,[["__scopeId","data-v-1b4a0c09"]]);export{Le as default};
