import{_ as W,r as i,k as I,c as P,b as l,w as o,a1 as V,e as G,h as R,a0 as g,q as A,o as y,a2 as u,a as n,a4 as b,C as f,t as k}from"./index-BGGQp8am.js";import{A as H}from"./accounting-BYqDnnmr.js";import{I as $}from"./inperson-XPh0k08D.js";import{V as F}from"./VAlert-DT-B8a-f.js";import{a as L,V as j}from"./VCard-DviU4idv.js";import{V as s}from"./VTextField-WP0qWeTO.js";import{V as E}from"./VDataTable-DtX3A3n0.js";import{a as M}from"./VSelect-u7PDJcCQ.js";import"./createSimpleFunctional-CvY-CSpH.js";import"./VAvatar-DaVSZH8j.js";import"./VImg-BkyScCE_.js";import"./index-D9pifSW7.js";import"./index-D6Ttif6R.js";import"./VDivider-Dw5tHprI.js";import"./VMenu-csCg2uWo.js";import"./dialog-transition-03ddOcrc.js";import"./VSelectionControl-q_sGCHR6.js";const q={class:"w-100 d-flex justify-end"},z={class:"w-100 d-flex justify-end"},J={__name:"AccountingSellTrade",setup(K){const c=i(""),m=i(!1),p=i(!1),N=i([{title:"نام",key:"seller.firstName"},{title:"نام خانوادگی",key:"seller.lastName"},{title:"شناسه پرداخت",key:"invoiceId"},{title:"مبلغ (تومان)",key:"totalPrice"},{title:"میزان طلا (گرم)",key:"goldWeight"},{title:"قیمت طلا (تومان)",key:"goldPrice"},{title:"تاریخ",key:"date"},{title:"زمان",key:"time"},{title:"کارشناس",key:"accounterId"},{title:"وضعیت",key:"status"}]),a=i({firstName:"",lastName:"",nationalCode:"",phoneNumber:"",tradeType:1,type:"sell",goldPrice:"",goldWeight:"",admin:"",accounter:"",startDate:"",startTime:"",endDate:"",endTime:"",invoiceId:"",status:""}),v=i(),x=async()=>{try{p.value=!0;const d=await H.GoldBoxSellList();return v.value=d.data,d}catch(d){d.response.status==401&&(localStorage.clear(),g.replace("/login")),c.value=d.response.data.error||"خطایی رخ داده است!",m.value=!0,setTimeout(()=>{m.value=!1},1e4)}finally{p.value=!1}},S=async d=>{try{p.value=!0,a.value.status=d;const e=await $.SubmitFilterInvoice(a.value);return v.value=e.data,e}catch(e){e.response.status==401&&(localStorage.clear(),g.replace("/login")),c.value=e.response.data.error||"خطایی رخ داده است!",m.value=!0,setTimeout(()=>{m.value=!1},1e4)}finally{p.value=!1}},T=d=>d.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),C=[d=>/^\d{10}$/.test(d)||"کد ملی باید ۱۰ رقم باشد",d=>{if(!/^\d{10}$/.test(d))return!0;const e=+d[9],r=d.split("").slice(0,9).reduce((t,B,D)=>t+ +B*(10-D),0)%11;return r<2&&e===r||r>=2&&e+r===11||"کد ملی نامعتبر است"}],U=()=>{a.value.phoneNumber=a.value.phoneNumber.replace(/\D/g,"").slice(0,11)},_=[d=>/^09\d{9}$/.test(d)||"شماره معتبر نیست"],w=[d=>!!d,d=>/^\d+(\.\d{1,3})?$/.test(d)];return I(()=>{x()}),(d,e)=>{const r=A("persian-date-picker");return y(),P("div",null,[l(V,null,{default:o(()=>[l(u,{cols:"12"},{default:o(()=>[l(L,null,{default:o(()=>[l(V,{class:"filter my-3"},{default:o(()=>[l(u,{cols:"6",md:"3"},{default:o(()=>[l(r,{modelValue:a.value.fromDate,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.fromDate=t),placeholder:"از تاریخ"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(r,{type:"time",modelValue:a.value.fromTime,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.fromTime=t),placeholder:"از زمان",format:"HH:mm:ss"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(r,{modelValue:a.value.toDate,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.toDate=t),placeholder:"تا تاریخ"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(r,{type:"time",modelValue:a.value.toTime,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.toTime=t),placeholder:"تا زمان",format:"HH:mm:ss"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(s,{modelValue:a.value.firstName,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.firstName=t),label:"نام",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(s,{modelValue:a.value.lastName,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.lastName=t),label:"نام خانوادگی",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(s,{modelValue:a.value.phoneNumber,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.phoneNumber=t),label:"شماره موبایل",density:"compact",variant:"outlined",rules:_,onInput:U},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(s,{modelValue:a.value.nationalCode,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.nationalCode=t),label:"کد ملی",density:"compact",variant:"outlined",rules:C},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(s,{modelValue:a.value.goldPrice,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.goldPrice=t),label:"قیمت طلا",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(s,{modelValue:a.value.goldWeight,"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.goldWeight=t),label:"وزن طلا",density:"compact",variant:"outlined",rules:w},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(s,{modelValue:a.value.goldWeight,"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.goldWeight=t),label:"ادمین",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6",md:"3"},{default:o(()=>[l(s,{modelValue:a.value.goldWeight,"onUpdate:modelValue":e[11]||(e[11]=t=>a.value.goldWeight=t),label:"حسابدار",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(u,{md:"6",class:"d-none d-md-flex"}),l(u,{cols:"12",md:"3"},{default:o(()=>[n("div",q,[l(b,{"prepend-icon":"ri-loop-left-line",variant:"tonal",block:"",onClick:e[12]||(e[12]=t=>S("complete"))},{default:o(()=>e[13]||(e[13]=[f("به روز رسانی")])),_:1})])]),_:1}),l(u,{cols:"12",md:"3"},{default:o(()=>[n("div",z,[l(b,{"prepend-icon":"ri-file-excel-line",block:""},{default:o(()=>e[14]||(e[14]=[f("خروجی اکسل")])),_:1})])]),_:1})]),_:1}),l(j,{title:"فروش صندوق طلا"},{default:o(()=>[e[15]||(e[15]=n("ul",{class:"listGuide"},[n("li",null," ثبت معامله فروش صندوق طلا به صورت تلفنی توسط کارشناس انجام شده و مبلغ به حساب کاربر توسط بخش حسابداری بازگردانده می‌شود. ")],-1)),l(E,{headers:N.value,items:v.value,loading:p.value},{"item.totalPrice":o(({item:t})=>[n("p",null,k(T(t.totalPrice)),1)]),"item.status":o(({item:t})=>[n("div",null,[l(M,{text:t.status=="completed"?"برداشت شده":"در انتظار برداشت",color:t.status=="completed"?"#ff0000":"#66666",size:"small"},null,8,["text","color"])])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1})]),_:1})]),_:1}),m.value?(y(),G(F,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:o(()=>[f(k(c.value),1)]),_:1})):R("",!0)])}}},me=W(J,[["__scopeId","data-v-9b5b7097"]]);export{me as default};
