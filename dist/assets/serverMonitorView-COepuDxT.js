import{_ as S,r as s,k as C,c,b as e,w as t,af as w,ac as x,F as p,a6 as D,o as d,a7 as h,a8 as b,V as A,a as f,ae as B,aa as I,t as M}from"./index-C9yqJSFV.js";import{S as T}from"./api-TeNC-Exm.js";import{V,b as z}from"./VCard-BJQPcNNo.js";import{V as E}from"./VTextField-FfkoJG28.js";import{V as F}from"./VDataTable-CWf0on0g.js";import{a as N}from"./VSelect-V6tcFLf1.js";import{V as U}from"./VSpacer-oc-OOpnn.js";import{d as q}from"./VMenu-LpBFxmRx.js";import"./createSimpleFunctional-BHOJu7FA.js";import"./VAvatar-mGsasfoH.js";import"./VImg-_speSVzn.js";const L={async AllStatus(){return(await T.get("/logger/status")).data}},$={class:"pa-5"},G={__name:"serverMonitorView",setup(g){const u=s(!1),m=s(),_=s([{title:"service name",key:"service"},{title:"status",key:"status"},{title:"request count",key:"total.all"},{title:"request count",key:"total.all"},{title:"success",key:"total.statusCount.success"},{title:"failed",key:"total.statusCount.failed"},{title:"internalIssues",key:"total.statusCount.internalIssues"},{title:"error",key:"error"}]),i=s(null),o=s(),n=s(!1),k=async()=>{try{u.value=!0;const r=await L.AllStatus();return m.value=r.data,r}catch(r){r.response.status==401&&(localStorage.clear(),D.replace("/login")),errorMsg.value=r.response.data.error||"خطایی رخ داده است!",alertError.value=!0,setTimeout(()=>{alertError.value=!1},1e4)}finally{u.value=!1}},y=r=>{n.value=!0,o.value=r.total.error,console.log(o.value),console.log(o.value)};return C(()=>{k()}),(r,l)=>(d(),c(p,null,[e(w,null,{default:t(()=>[e(h,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(V,{title:"سرویس ها"},{text:t(()=>[e(E,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=a=>i.value=a),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:t(()=>[e(F,{headers:_.value,items:m.value,search:i.value,loading:u.value},{"item.status":t(({item:a})=>[e(N,{text:a.status==0?"DOWN":"UP",color:a.status==0?"#ff0000":"#43A047",size:"small"},null,8,["text","color"])]),"item.error":t(({item:a})=>[e(A,{class:"me-2",size:"small",icon:"ri-signal-wifi-error-line",color:"#d4af37",onClick:v=>y(a)},null,8,["onClick"])]),_:1},8,["headers","items","search","loading"])]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=a=>n.value=a),"max-width":"500",class:"error-dialog"},{default:t(()=>[e(V,{class:"dialog-card"},{default:t(()=>[f("div",$,[(d(!0),c(p,null,B(o.value,(a,v)=>(d(),c("div",{key:v},[f("p",null,M(a),1),e(q)]))),128))]),e(z,null,{default:t(()=>[e(U),e(I,{text:"close",onClick:l[1]||(l[1]=a=>n.value=!1),size:"large",class:"m-3"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Z=S(G,[["__scopeId","data-v-30a6e33e"]]);export{Z as default};
