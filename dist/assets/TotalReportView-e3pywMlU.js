import{_ as E,r as s,c as y,b as t,w as o,a1 as L,e as d,j as m,F as U,s as M,o as r,a5 as P,$ as k,a0 as u,a as n,a4 as A,a2 as G,D as T,t as _,Z as D}from"./index-D6NN9nJi.js";import{R as I}from"./report-Bi27B-B2.js";import{V as Z}from"./VForm-BGUNR3RF.js";import{V as C}from"./VAlert-CM1SafCA.js";import{V as v}from"./VSelect-DWmwU3hD.js";import{V as $}from"./VTextField-BX-aWGtp.js";import"./api-BKTrItZ9.js";import"./index-ByxnNLuS.js";import"./createSimpleFunctional-CmpqCwaW.js";import"./VMenu-LTn4vSWV.js";import"./index-Ce-FaU_b.js";import"./VAvatar-cwbRiH4K.js";import"./VImg-C4t8BfhI.js";import"./VDivider-BlIGU16d.js";import"./dialog-transition-kGvKCl72.js";import"./VSelectionControl-JGB9LPR1.js";import"./VChip-BARVuehg.js";const q={class:"d-flex flex-column justify-start"},z=["href"],J={class:"d-flex justify-end"},K={__name:"TotalReportView",setup(O){const f=s(!1),g=s(""),c=s(!1),x=s(""),V=s(!1),e=s({report:1,startDate:"",startTime:"",endDate:"",endTime:"",type:"all",deal:"all",status:"all",nationalCode:"",auth:""}),b=s({link:[]}),R=s([{value:1,label:"واریز و برداشت"},{value:2,label:"معاملات"},{value:3,label:"کاربران"},{value:4,label:"گزارش گیری ساعتی"}]),S=s([{value:"all",label:"همه"},{value:"deposit",label:"واریز"},{value:"withdraw",label:"برداشت"}]),j=s([{value:"all",label:"همه"},{value:"sell",label:"فروش"},{value:"buy",label:"خرید"}]),B=s([{value:"all",label:"همه"},{value:"approved",label:"احراز شده"},{value:"pebding",label:"در انتظار احراز"}]),H=s([{value:"all",label:"همه"},{value:"fromPhone",label:"تلفنی"},{value:"inPerson",label:"حضوری"},{value:"fromGateway",label:"آنلاین"}]),F=s([{value:"all",label:"همه"},{value:"completed",label:"موفق"},{value:"failed",label:"ناموفق"},{value:"pending",label:"در انتظار"}]),N=async()=>{try{f.value=!0;const i=await I.ReportSubmit(e.value);return b.value.link.push(i[1]),x.value=i.msg,V.value=!0,setTimeout(()=>{V.value=!1,D.replace("/ReportHistory")},1e3),i}catch(i){i.response.status==401&&(localStorage.clear(),D.replace("/login")),g.value=i.response.data.error||"خطایی رخ داده است!",c.value=!0,setTimeout(()=>{c.value=!1},1e4)}finally{f.value=!1}};return(i,l)=>{const p=M("persian-date-picker");return r(),y(U,null,[t(Z,{onSubmit:L(N,["prevent"])},{default:o(()=>[t(P,{class:"filter-container"},{default:o(()=>[t(k,null,{default:o(()=>[t(u,{cols:"6",md:"4",class:"my-3"},{default:o(()=>[t(v,{modelValue:e.value.report,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.report=a),items:R.value,label:"نوع گزارش",variant:"outlined",rules:[a=>!!a||"حداقل یک مورد الزامیست"],"item-title":"label","item-value":"value"},null,8,["modelValue","items","rules"])]),_:1})]),_:1}),e.value.report!=4?(r(),d(k,{key:0},{default:o(()=>[t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>l[11]||(l[11]=[n("div",{class:"d-flex justify-start align-center"},[n("p",{class:"mb-0"},"زمان شروع: ")],-1)])),_:1}),t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(p,{modelValue:e.value.startDate,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.startDate=a),placeholder:"تاریخ"},null,8,["modelValue"])]),_:1}),t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(p,{type:"time",modelValue:e.value.startTime,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.startTime=a),placeholder:"زمان",format:"HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>l[12]||(l[12]=[n("div",{class:"d-flex justify-start align-center"},[n("p",{class:"mb-0"},"زمان پایان: ")],-1)])),_:1}),t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(p,{modelValue:e.value.endDate,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.endDate=a),placeholder:"تاریخ"},null,8,["modelValue"])]),_:1}),t(u,{cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(p,{type:"time",modelValue:e.value.endTime,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.endTime=a),placeholder:"زمان",format:"HH:mm:ss"},null,8,["modelValue"])]),_:1}),e.value.report==1?(r(),d(u,{key:0,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(v,{modelValue:e.value.type,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.type=a),items:S.value,label:"نوع انتقال",variant:"outlined","item-title":"label","item-value":"value"},null,8,["modelValue","items"])]),_:1})):m("",!0),e.value.report==2?(r(),d(u,{key:1,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(v,{modelValue:e.value.type,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.type=a),items:j.value,label:"نوع معامله",variant:"outlined","item-title":"label","item-value":"value"},null,8,["modelValue","items"])]),_:1})):m("",!0),e.value.report==2?(r(),d(u,{key:2,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(v,{modelValue:e.value.deal,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.deal=a),items:H.value,label:"نوع ثبت",variant:"outlined","item-title":"label","item-value":"value"},null,8,["modelValue","items"])]),_:1})):m("",!0),e.value.report!=3?(r(),d(u,{key:3,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(v,{modelValue:e.value.status,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.status=a),items:F.value,label:"وضعیت",variant:"outlined","item-title":"label","item-value":"value"},null,8,["modelValue","items"])]),_:1})):m("",!0),e.value.report!=3?(r(),d(u,{key:4,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t($,{modelValue:e.value.nationalCode,"onUpdate:modelValue":l[9]||(l[9]=a=>e.value.nationalCode=a),label:"کد ملی",variant:"outlined"},null,8,["modelValue"])]),_:1})):m("",!0),e.value.report==3?(r(),d(u,{key:5,cols:"6",md:"4",class:"my-4"},{default:o(()=>[t(v,{modelValue:e.value.auth,"onUpdate:modelValue":l[10]||(l[10]=a=>e.value.auth=a),items:B.value,label:"وضعیت کاربران",variant:"outlined","item-title":"label","item-value":"value"},null,8,["modelValue","items"])]),_:1})):m("",!0)]),_:1})):m("",!0),t(k,null,{default:o(()=>[t(u,{cols:"12"},{default:o(()=>[n("div",q,[b.value.link!=""?(r(!0),y(U,{key:0},A(b.value.link,(a,w)=>(r(),y("a",{class:"download-link my-1",key:w,href:a},"دانلود گزارش "+_(w+1),9,z))),128)):m("",!0)])]),_:1}),t(u,{cols:"12"},{default:o(()=>[n("div",J,[t(G,{type:"submit",loading:f.value},{default:o(()=>l[13]||(l[13]=[T("ایجاد گزارش")])),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1}),V.value?(r(),d(C,{key:0,color:"success",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:o(()=>[T(_(x.value),1)]),_:1})):m("",!0),c.value?(r(),d(C,{key:1,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:o(()=>[T(_(g.value),1)]),_:1})):m("",!0)],64)}}},ve=E(K,[["__scopeId","data-v-f6295b59"]]);export{ve as default};
