import{d as Pe,e as Te,V as de}from"./VTextField-CJv0rfnW.js";import{E as z,N as ye,H as te,I as ee,B as R,L as le,G as Ve,b as f,K as E,O as be,bC as we,l as H,F as W,p as Ce,A as L,aX as fe,r as N,bb as ke,bi as oe,aJ as Ae,bJ as Re,a9 as Ie,b2 as re,ah as De,aM as Be,ai as Fe,y as Oe,ba as _e,aj as Q,i as Ee,W as Le,aZ as ue,V as ve,bK as Me,ag as He,D as Ke,aR as Ue,bL as me,bm as he}from"./index-Bn7odE7o.js";import{f as qe}from"./index-B7lMVxRV.js";import{m as Ne,u as ze,V as $e,a as je,b as pe}from"./VMenu-CZh-OGct.js";import{m as We}from"./index-BNlLCZ0O.js";import{g as Je,a as Xe}from"./dialog-transition-s0Rh38aG.js";import{m as Ge,V as ge}from"./VSelectionControl-B9GrTL5K.js";import{V as Ye}from"./VAvatar-D6FrCQUn.js";import{V as Ze}from"./VChip-ClcutkCL.js";const Qe=z({indeterminate:Boolean,indeterminateIcon:{type:ye,default:"$checkboxIndeterminate"},...Ge({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),et=te()({name:"VCheckboxBtn",props:Qe(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,c){let{slots:n}=c;const i=ee(e,"indeterminate"),o=ee(e,"modelValue");function v(r){i.value&&(i.value=!1)}const m=R(()=>i.value?e.indeterminateIcon:e.falseIcon),a=R(()=>i.value?e.indeterminateIcon:e.trueIcon);return le(()=>{const r=Ve(ge.filterProps(e),["modelValue"]);return f(ge,E(r,{modelValue:o.value,"onUpdate:modelValue":[b=>o.value=b,v],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:m.value,trueIcon:a.value,"aria-checked":i.value?"mixed":void 0}),n)}),{}}}),tt=z({renderless:Boolean,...be()},"VVirtualScrollItem"),lt=te()({name:"VVirtualScrollItem",inheritAttrs:!1,props:tt(),emits:{"update:height":e=>!0},setup(e,c){let{attrs:n,emit:i,slots:o}=c;const{resizeRef:v,contentRect:m}=we(void 0,"border");H(()=>{var a;return(a=m.value)==null?void 0:a.height},a=>{a!=null&&i("update:height",a)}),le(()=>{var a,r;return e.renderless?f(W,null,[(a=o.default)==null?void 0:a.call(o,{itemRef:v})]):f("div",E({ref:v,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(r=o.default)==null?void 0:r.call(o)])})}}),nt=-1,at=1,ie=100,ot=z({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function ut(e,c){const n=Ce(),i=L(0);fe(()=>{i.value=parseFloat(e.itemHeight||0)});const o=L(0),v=L(Math.ceil((parseInt(e.height)||n.height.value)/(i.value||16))||1),m=L(0),a=L(0),r=N(),b=N();let s=0;const{resizeRef:O,contentRect:A}=we();fe(()=>{O.value=r.value});const k=R(()=>{var t;return r.value===document.documentElement?n.height.value:((t=A.value)==null?void 0:t.height)||parseInt(e.height)||0}),D=R(()=>!!(r.value&&b.value&&k.value&&i.value));let x=Array.from({length:c.value.length}),I=Array.from({length:c.value.length});const y=L(0);let P=-1;function _(t){return x[t]||i.value}const p=Re(()=>{const t=performance.now();I[0]=0;const u=c.value.length;for(let h=1;h<=u-1;h++)I[h]=(I[h-1]||0)+_(h-1);y.value=Math.max(y.value,performance.now()-t)},y),J=H(D,t=>{t&&(J(),s=b.value.offsetTop,p.immediate(),B(),~P&&Ie(()=>{re&&window.requestAnimationFrame(()=>{Z(P),P=-1})}))});ke(()=>{p.clear()});function ne(t,u){const h=x[t],V=i.value;i.value=V?Math.min(i.value,u):u,(h!==u||V!==i.value)&&(x[t]=u,p())}function T(t){return t=oe(t,0,c.value.length-1),I[t]||0}function X(t){return it(I,t)}let K=0,M=0,$=0;H(k,(t,u)=>{u&&(B(),t<u&&requestAnimationFrame(()=>{M=0,B()}))});let U=-1;function q(){if(!r.value||!b.value)return;const t=r.value.scrollTop,u=performance.now();u-$>500?(M=Math.sign(t-K),s=b.value.offsetTop):M=t-K,K=t,$=u,window.clearTimeout(U),U=window.setTimeout(G,500),B()}function G(){!r.value||!b.value||(M=0,$=0,window.clearTimeout(U),B())}let Y=-1;function B(){cancelAnimationFrame(Y),Y=requestAnimationFrame(ae)}function ae(){if(!r.value||!k.value)return;const t=K-s,u=Math.sign(M),h=Math.max(0,t-ie),V=oe(X(h),0,c.value.length),d=t+k.value+ie,g=oe(X(d)+1,V+1,c.value.length);if((u!==nt||V<o.value)&&(u!==at||g>v.value)){const S=T(o.value)-T(V),F=T(g)-T(v.value);Math.max(S,F)>ie?(o.value=V,v.value=g):(V<=0&&(o.value=V),g>=c.value.length&&(v.value=g))}m.value=T(o.value),a.value=T(c.value.length)-T(v.value)}function Z(t){const u=T(t);!r.value||t&&!u?P=t:r.value.scrollTop=u}const l=R(()=>c.value.slice(o.value,v.value).map((t,u)=>{const h=u+o.value;return{raw:t,index:h,key:Ae(t,e.itemKey,h)}}));return H(c,()=>{x=Array.from({length:c.value.length}),I=Array.from({length:c.value.length}),p.immediate(),B()},{deep:1}),{calculateVisibleItems:B,containerRef:r,markerRef:b,computedItems:l,paddingTop:m,paddingBottom:a,scrollToIndex:Z,handleScroll:q,handleScrollend:G,handleItemResize:ne}}function it(e,c){let n=e.length-1,i=0,o=0,v=null,m=-1;if(e[n]<c)return n;for(;i<=n;)if(o=i+n>>1,v=e[o],v>c)n=o-1;else if(v<c)m=o,i=o+1;else return v===c?o:i;return m}const rt=z({items:{type:Array,default:()=>[]},renderless:Boolean,...ot(),...be(),...De()},"VVirtualScroll"),st=te()({name:"VVirtualScroll",props:rt(),setup(e,c){let{slots:n}=c;const i=Be("VVirtualScroll"),{dimensionStyles:o}=Fe(e),{calculateVisibleItems:v,containerRef:m,markerRef:a,handleScroll:r,handleScrollend:b,handleItemResize:s,scrollToIndex:O,paddingTop:A,paddingBottom:k,computedItems:D}=ut(e,Oe(e,"items"));return _e(()=>e.renderless,()=>{function x(){var P,_;const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[y]("scroll",r,{passive:!0}),document[y]("scrollend",b)):((P=m.value)==null||P[y]("scroll",r,{passive:!0}),(_=m.value)==null||_[y]("scrollend",b))}Ee(()=>{m.value=Je(i.vnode.el,!0),x(!0)}),ke(x)}),le(()=>{const x=D.value.map(I=>f(lt,{key:I.key,renderless:e.renderless,"onUpdate:height":y=>s(I.index,y)},{default:y=>{var P;return(P=n.default)==null?void 0:P.call(n,{item:I.raw,index:I.index,...y})}}));return e.renderless?f(W,null,[f("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:Q(A.value)}},null),x,f("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Q(k.value)}},null)]):f("div",{ref:m,class:["v-virtual-scroll",e.class],onScrollPassive:r,onScrollend:b,style:[o.value,e.style]},[f("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:Q(A.value),paddingBottom:Q(k.value)}},[x])])}),{calculateVisibleItems:v,scrollToIndex:O}}});function ct(e,c){const n=L(!1);let i;function o(a){cancelAnimationFrame(i),n.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{n.value=!1})})}async function v(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(n.value){const r=H(n,()=>{r(),a()})}else a()})}async function m(a){var s,O;if(a.key==="Tab"&&((s=c.value)==null||s.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const r=(O=e.value)==null?void 0:O.$el;if(!r)return;(a.key==="Home"||a.key==="End")&&r.scrollTo({top:a.key==="Home"?0:r.scrollHeight,behavior:"smooth"}),await v();const b=r.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const A=r.getBoundingClientRect().top;for(const k of b)if(k.getBoundingClientRect().top>=A){k.focus();break}}else{const A=r.getBoundingClientRect().bottom;for(const k of[...b].reverse())if(k.getBoundingClientRect().bottom<=A){k.focus();break}}}return{onScrollPassive:o,onKeydown:m}}const dt=z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ye,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Ne({itemChildren:!1})},"Select"),ft=z({...dt(),...Ve(Pe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...We({transition:{component:Xe}})},"VSelect"),kt=te()({name:"VSelect",props:ft(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,c){let{slots:n}=c;const{t:i}=Le(),o=N(),v=N(),m=N(),{items:a,transformIn:r,transformOut:b}=ze(e),s=ee(e,"modelValue",[],l=>r(l===null?[null]:Ue(l)),l=>{const t=b(l);return e.multiple?t:t[0]??null}),O=R(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:s.value.length),A=Te(e),k=R(()=>s.value.map(l=>l.value)),D=L(!1);let x="",I;const y=R(()=>e.hideSelected?a.value.filter(l=>!s.value.some(t=>(e.valueComparator||ue)(t,l))):a.value),P=R(()=>e.hideNoData&&!y.value.length||A.isReadonly.value||A.isDisabled.value),_=ee(e,"menu"),p=R({get:()=>_.value,set:l=>{var t;_.value&&!l&&((t=v.value)!=null&&t.Î¨openChildren.size)||l&&P.value||(_.value=l)}}),J=R(()=>p.value?e.closeText:e.openText),ne=R(()=>{var l;return{...e.menuProps,activatorProps:{...((l=e.menuProps)==null?void 0:l.activatorProps)||{},"aria-haspopup":"listbox"}}}),T=N(),X=ct(T,o);function K(l){e.openOnClear&&(p.value=!0)}function M(){P.value||(p.value=!p.value)}function $(l){me(l)&&U(l)}function U(l){var V,d;if(!l.key||A.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(p.value=!0),["Escape","Tab"].includes(l.key)&&(p.value=!1),l.key==="Home"?(V=T.value)==null||V.focus("first"):l.key==="End"&&((d=T.value)==null||d.focus("last"));const t=1e3;if(!me(l))return;const u=performance.now();u-I>t&&(x=""),x+=l.key.toLowerCase(),I=u;const h=a.value.find(g=>g.title.toLowerCase().startsWith(x));if(h!==void 0){s.value=[h];const g=y.value.indexOf(h);re&&window.requestAnimationFrame(()=>{var S;g>=0&&((S=m.value)==null||S.scrollToIndex(g))})}}function q(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!l.props.disabled)if(e.multiple){const u=s.value.findIndex(V=>(e.valueComparator||ue)(V.value,l.value)),h=t??!~u;if(~u){const V=h?[...s.value,l]:[...s.value];V.splice(u,1),s.value=V}else h&&(s.value=[...s.value,l])}else{const u=t!==!1;s.value=u?[l]:[],Ie(()=>{p.value=!1})}}function G(l){var t;(t=T.value)!=null&&t.$el.contains(l.relatedTarget)||(p.value=!1)}function Y(){var l;e.eager&&((l=m.value)==null||l.calculateVisibleItems())}function B(){var l;D.value&&((l=o.value)==null||l.focus())}function ae(l){D.value=!0}function Z(l){if(l==null)s.value=[];else if(he(o.value,":autofill")||he(o.value,":-webkit-autofill")){const t=a.value.find(u=>u.title===l);t&&q(t)}else o.value&&(o.value.value="")}return H(p,()=>{if(!e.hideSelected&&p.value&&s.value.length){const l=y.value.findIndex(t=>s.value.some(u=>(e.valueComparator||ue)(u.value,t.value)));re&&window.requestAnimationFrame(()=>{var t;l>=0&&((t=m.value)==null||t.scrollToIndex(l))})}}),H(()=>e.items,(l,t)=>{p.value||D.value&&!t.length&&l.length&&(p.value=!0)}),le(()=>{const l=!!(e.chips||n.chip),t=!!(!e.hideNoData||y.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),u=s.value.length>0,h=de.filterProps(e),V=u||!D.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return f(de,E({ref:o},h,{modelValue:s.value.map(d=>d.props.value).join(", "),"onUpdate:modelValue":Z,focused:D.value,"onUpdate:focused":d=>D.value=d,validationValue:s.externalValue,counterValue:O.value,dirty:u,class:["v-select",{"v-select--active-menu":p.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:V,"onClick:clear":K,"onMousedown:control":M,onBlur:G,onKeydown:U,"aria-label":i(J.value),title:i(J.value)}),{...n,default:()=>f(W,null,[f($e,E({ref:v,modelValue:p.value,"onUpdate:modelValue":d=>p.value=d,activator:"parent",contentClass:"v-select__content",disabled:P.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Y,onAfterLeave:B},ne.value),{default:()=>[t&&f(je,E({ref:T,selected:k.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:d=>d.preventDefault(),onKeydown:$,onFocusin:ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},X,e.listProps),{default:()=>{var d,g,S;return[(d=n["prepend-item"])==null?void 0:d.call(n),!y.value.length&&!e.hideNoData&&(((g=n["no-data"])==null?void 0:g.call(n))??f(pe,{key:"no-data",title:i(e.noDataText)},null)),f(st,{ref:m,renderless:!0,items:y.value,itemKey:"value"},{default:F=>{var ce;let{item:w,index:j,itemRef:C}=F;const se=E(w.props,{ref:C,key:w.value,onClick:()=>q(w,null)});return((ce=n.item)==null?void 0:ce.call(n,{item:w,index:j,props:se}))??f(pe,E(se,{role:"option"}),{prepend:Se=>{let{isSelected:xe}=Se;return f(W,null,[e.multiple&&!e.hideSelected?f(et,{key:w.value,modelValue:xe,ripple:!1,tabindex:"-1"},null):void 0,w.props.prependAvatar&&f(Ye,{image:w.props.prependAvatar},null),w.props.prependIcon&&f(ve,{icon:w.props.prependIcon},null)])}})}}),(S=n["append-item"])==null?void 0:S.call(n)]}})]}),s.value.map((d,g)=>{function S(C){C.stopPropagation(),C.preventDefault(),q(d,!1)}const F={"onClick:close":S,onKeydown(C){C.key!=="Enter"&&C.key!==" "||(C.preventDefault(),C.stopPropagation(),S(C))},onMousedown(C){C.preventDefault(),C.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},w=l?!!n.chip:!!n.selection,j=w?Me(l?n.chip({item:d,index:g,props:F}):n.selection({item:d,index:g})):void 0;if(!(w&&!j))return f("div",{key:d.value,class:"v-select__selection"},[l?n.chip?f(He,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:d.title}}},{default:()=>[j]}):f(Ze,E({key:"chip",closable:e.closableChips,size:"small",text:d.title,disabled:d.props.disabled},F),null):j??f("span",{class:"v-select__selection-text"},[d.title,e.multiple&&g<s.value.length-1&&f("span",{class:"v-select__selection-comma"},[Ke(",")])])])})]),"append-inner":function(){var F,w;for(var d=arguments.length,g=new Array(d),S=0;S<d;S++)g[S]=arguments[S];return f(W,null,[(F=n["append-inner"])==null?void 0:F.call(n,...g),e.menuIcon?f(ve,{class:"v-select__menu-icon",color:(w=o.value)==null?void 0:w.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),qe({isFocused:D,menu:p,select:q},o)}});export{kt as V,et as a,Qe as m};
