import{_ as I,r as o,i as C,c as w,b as t,w as n,$ as D,e as F,j as L,F as E,at as v,o as f,a0 as x,a,a1 as U,a2 as z,D as j,t as r}from"./index-D3cuJDmY.js";import{G as g}from"./price-DhHf4Dk3.js";import{V as A}from"./VAlert-wn3ycb87.js";import{V as R}from"./VSwitch-DskPyhfa.js";import{V as p}from"./VDivider-D-NNUxz0.js";import{V as W}from"./VForm-DyZ3lXHd.js";import{V as $}from"./VTextField-CN9lFNLl.js";import"./createSimpleFunctional-C2b8qME-.js";import"./index-DMfn3_aI.js";import"./VSelectionControl-ZfDZt-Lq.js";import"./index-RldtkqtO.js";const q={class:"box"},H={class:"d-flex justify-space-between my-4"},J={class:"my-4"},K={class:"box"},O={class:"d-flex justify-space-between align-center manual-price-box my-4"},Q={key:0},X={key:1},Y={class:"d-flex justify-space-between align-center my-4"},Z={class:"d-flex justify-space-between align-center my-4"},ee={class:"box"},ae={class:"d-flex justify-space-between my-3 py-3"},le={class:"ma-0"},se={class:"d-flex justify-space-between my-3 py-3"},te={class:"ma-0"},oe={class:"d-flex justify-space-between my-3 py-3"},re={class:"ma-0"},ie={class:"d-flex justify-space-between my-3 py-3"},ne={class:"ma-0"},ue={class:"d-flex justify-space-between my-3 py-3"},ce={class:"ma-0"},de={__name:"goldpriceSettingView",setup(pe){const M=o(!1),y=o(!1),_=o(!1),S=o(!1),i=o(!1),u=o(""),c=o({melligold:"-",talair:"-",tgju:"-",talasea:"-",miligold:"-"}),s=o({setManual:!1,goldPriceManual:null}),m=o({buyPrice:"",sellPrice:""}),d=o(""),h=()=>{s.value.goldPriceManual=s.value.goldPriceManual.replace(/\D/g,""),s.value.goldPriceManual.length>10&&(s.value.goldPriceManual=s.value.goldPriceManual.slice(0,11)),s.value.goldPriceManual=G(s.value.goldPriceManual)},G=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),P=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),k=[e=>!!e||"مقدار ورودی نمی‌تواند خالی باشد"],b=async()=>{try{M.value=!0;const e=await g.PriceStatus();return s.value.setManual=e.data.active,e.data.active==!1?d.value="غیر فعال است":d.value=e.data.price,e}catch(e){e.response.status==401&&(localStorage.clear(),v.replace("/login")),u.value=e.response.data.error||"خطایی رخ داده است!",i.value=!0,setTimeout(()=>{i.value=!1},1e4)}finally{M.value=!1}},B=async()=>{try{y.value=!0;const e=await g.SetPriceStatus(s.value.goldPriceManual);return b(),e}catch(e){e.response.status==401&&(localStorage.clear(),v.replace("/login")),u.value=e.response.data.error||"خطایی رخ داده است!",i.value=!0,setTimeout(()=>{i.value=!1},1e4)}finally{y.value=!1}},N=async()=>{try{_.value=!0;const e=await g.switchPriceStatus();return b(),e}catch(e){e.response.status==401&&(localStorage.clear(),v.replace("/login")),u.value=e.response.data.error||"خطایی رخ داده است!",i.value=!0,setTimeout(()=>{i.value=!1},1e4)}finally{_.value=!1}},T=async()=>{try{S.value=!0;const e=await g.GetGoldPrice();return m.value.buyPrice=e.buyPrice,m.value.sellPrice=e.sellPrice,e}catch(e){e.response.status==401&&(localStorage.clear(),v.replace("/login")),u.value=e.response.data.error||"خطایی رخ داده است!",i.value=!0,setTimeout(()=>{i.value=!1},1e4)}finally{S.value=!1}};return C(()=>{b(),T()}),(e,l)=>(f(),w(E,null,[t(D,null,{default:n(()=>[t(x,{cols:"12",md:"6"},{default:n(()=>[a("div",q,[a("div",H,[l[2]||(l[2]=a("h4",null,"اعمال قیمت دستی",-1)),t(R,{modelValue:s.value.setManual,"onUpdate:modelValue":l[0]||(l[0]=V=>s.value.setManual=V),color:"#b08c4d",onInput:N,loading:_.value},null,8,["modelValue","loading"])]),t(p),a("div",J,[t(W,{ref:"form",class:"d-flex align-center",onSubmit:U(B,["prevent"])},{default:n(()=>[t($,{modelValue:s.value.goldPriceManual,"onUpdate:modelValue":l[1]||(l[1]=V=>s.value.goldPriceManual=V),label:"قیمت دستی طلا (تومان)",variant:"outlined",class:"ma-1",rules:k,onInput:h},null,8,["modelValue"]),t(z,{type:"submit",color:"primary",size:"large",class:"mx-1",loading:y.value,disabled:!s.value.setManual},{default:n(()=>l[3]||(l[3]=[j("اعمال قیمت دستی")])),_:1},8,["loading","disabled"])]),_:1},512)])])]),_:1}),t(x,{cols:"12",md:"6"},{default:n(()=>[a("div",K,[a("div",O,[l[4]||(l[4]=a("span",null,"قیمت دستی طلا: ",-1)),d.value!="غیر فعال است"?(f(),w("span",Q,r(P(d.value))+" تومان",1)):(f(),w("span",X,r(d.value),1))]),a("div",Y,[l[5]||(l[5]=a("span",null,"قیمت لحظه ای فروش: ",-1)),a("span",null,r(P(m.value.sellPrice))+" تومان",1)]),a("div",Z,[l[6]||(l[6]=a("span",null,"قیمت لحظه ای خرید: ",-1)),a("span",null,r(P(m.value.buyPrice))+" تومان",1)])])]),_:1}),t(x,{cols:"12"},{default:n(()=>[a("div",ee,[a("div",ae,[l[7]||(l[7]=a("p",{class:"ma-0"},"قیمت ملی گلد : ",-1)),a("p",le,r(c.value.melligold),1)]),t(p),a("div",se,[l[8]||(l[8]=a("p",{class:"ma-0"},"قیمت tala.ir : ",-1)),a("p",te,r(c.value.talair),1)]),t(p),a("div",oe,[l[9]||(l[9]=a("p",{class:"ma-0"},"قیمت میلی گلد : ",-1)),a("p",re,r(c.value.miligold),1)]),t(p),a("div",ie,[l[10]||(l[10]=a("p",{class:"ma-0"},"قیمت سایت تجارت جهانی : ",-1)),a("p",ne,r(c.value.tgju),1)]),t(p),a("div",ue,[l[11]||(l[11]=a("p",{class:"ma-0"},"قیمت طلاسی : ",-1)),a("p",ce,r(c.value.talasea),1)])])]),_:1})]),_:1}),i.value?(f(),F(A,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:n(()=>[j(r(u.value),1)]),_:1})):L("",!0)],64))}},Me=I(de,[["__scopeId","data-v-c4a57068"]]);export{Me as default};
