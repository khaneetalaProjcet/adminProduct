import{ad as N,_ as oe,r as n,j as re,k as ne,c as w,b as l,w as t,a7 as ie,F as U,a0 as b,o as u,a1 as j,a2 as i,C as W,V as f,e as c,h as G,a as s,t as r,a6 as q,a4 as P}from"./index-RRXVcsWe.js";import{S as de}from"./api-Dc_pDt-E.js";import{l as ue}from"./lodash-juhu05N1.js";import{V as O}from"./VDialog-C6-DNAo_.js";import{V as ce,a as z,b as me,c as E}from"./VTabs-2OjrMGC8.js";import{a as fe,V as x,b as Q}from"./VCard-Dc8UwjN1.js";import{V as B}from"./VTextField-DE2lXIPQ.js";import{V as H}from"./VDataTable-DyeNHHeY.js";import{V as R}from"./VChip-B_FFoNV-.js";import{V as ve}from"./VAlert-D1oRgK2O.js";import{V as J}from"./VSpacer-CHIWEP4B.js";import{V as I}from"./VDivider-CKVWvHEa.js";import"./dialog-transition-Uk22qVlM.js";import"./index-tMaE3sp7.js";import"./index-CaUsSR_F.js";import"./VWindowItem-DVnyVgrl.js";import"./VMenu-BHydRAqe.js";import"./createSimpleFunctional-Dpl1Mwt9.js";import"./VAvatar-DZiV9yBo.js";import"./VImg-1E9wCn6L.js";import"./VSelect-BnPFLU86.js";import"./VSelectionControl---fVhDex.js";const C={async AllStatus(){return(await de.get("/logger/status")).data},async transfer(m){return(await N.get(`/trlog?search=${m}`)).data},async analyseUser(){return(await N.get("")).data},async transferDetail(m){return(await N.get(`/analyze/${m}`)).data}},pe={class:"pa-4"},xe={class:"d-flex justify-end"},_e={class:"text-error"},ye={class:"pa-5"},ge={class:"pa-5"},Ve={class:"d-flex align-center justify-between"},ke={class:"mx-2"},we={class:"d-flex align-center justify-between"},be={class:"mx-2"},Ce={class:"d-flex align-center justify-between"},he={class:"mx-2"},Se={class:"d-flex align-center justify-between"},De={class:"mx-2"},Te={class:"d-flex align-center justify-between"},Ne={class:"mx-2"},Ue={class:"d-flex align-center justify-between"},je={class:"mx-2"},We={class:"d-flex align-center justify-between"},ze={class:"mx-2"},Ee={class:"d-flex align-center justify-between"},Be={class:"mx-2"},He={class:"d-flex justify-space-between align-items-center flex-wrap"},Ie={class:"d-flex mx-2"},Me={class:"mx-1"},Ae={class:"d-flex mx-2"},$e={class:"mx-1"},Le={class:"d-flex mx-2"},Fe={class:"mx-1"},Ge={class:"d-flex mx-2"},qe={class:"mx-1"},Pe={class:"d-flex mx-2"},Oe={class:"mx-1"},Qe={class:"d-flex mx-2"},Re={class:"mx-1"},Je={class:"d-flex mx-2"},Ke={class:"mx-1"},Xe={class:"d-flex mx-2"},Ye={class:"mx-1"},Ze={class:"d-flex mx-2"},es={class:"mx-1"},ss={class:"d-flex mx-2"},ls={class:"mx-1"},ts={class:"d-flex mx-2"},as={class:"mx-1"},os={class:"d-flex mx-2"},rs={class:"mx-1"},ns={__name:"serverMonitorView",setup(m){const v=n(!1),M=n(),_=n(null),K=n([{title:"service name",key:"service"},{title:"status",key:"status"},{title:"request count",key:"total.all"},{title:"request count",key:"total.all"},{title:"success",key:"total.statusCount.success"},{title:"failed",key:"total.statusCount.failed"},{title:"internalIssues",key:"total.statusCount.internalIssues"},{title:"error",key:"error"}]),h=n(null),A=n(),y=n(!1),g=n(""),$=n(),d=n(""),X=n([{title:"نام",key:"firstName"},{title:"نام خانوادگی",key:"lastName"},{title:"شماره همراه",key:"phoneNumber"},{title:"کد ملی",key:"nationalCode"},{title:"شهر",key:"officeName"},{title:"کارت بانکی",key:"isHaveBank"},{title:"انتقال یافته",key:"oldUserCheck"},{title:"فعالیت",key:"action"}]),S=n(),V=n(),k=n(!1),D=n(),Y=n([{title:"نام",key:"firstName"},{title:"نام خانوادگی",key:"lastName"},{title:"شماره همراه",key:"phoneNumber"},{title:"کد ملی",key:"nationalCode"},{title:"شهر",key:"officeName"},{title:"اختلاف طلا (گرم)",key:"compare"},{title:"فعالیت",key:"action"}]),L=n(),T=n(),Z=n(),ee=async()=>{try{v.value=!0;const o=await C.AllStatus();return M.value=o.data,o}catch(o){o.response.status==401&&(localStorage.clear(),b.replace("/login")),errorMsg.value=o.response.data.error||"خطایی رخ داده است!",alertError.value=!0,setTimeout(()=>{alertError.value=!1},1e4)}finally{v.value=!1}},F=async()=>{try{S.value=!0;const o=await C.transfer(g.value);return $.value=o,o}catch(o){o.response.status==401&&(localStorage.clear(),b.replace("/login")),errorMsg.value=o.response.data.error||"خطایی رخ داده است!",alertError.value=!0,setTimeout(()=>{alertError.value=!1},1e4)}finally{S.value=!1}},se=async()=>{try{T.value=!0;const o=await C.analyseUser();return L.value=o,o}catch(o){o.response.status==401&&(localStorage.clear(),b.replace("/login")),errorMsg.value=o.response.data.error||"خطایی رخ داده است!",alertError.value=!0,setTimeout(()=>{alertError.value=!1},1e4)}finally{T.value=!1}},le=o=>{k.value=!0,te(o.id)},te=async o=>{try{V.value=!0;const e=await C.transferDetail(o);return d.value=e,e}catch(e){e.response.status==401&&(localStorage.clear(),b.replace("/login")),errorMsg.value=e.response.data.error||"خطایی رخ داده است!",alertError.value=!0,setTimeout(()=>{alertError.value=!1},1e4)}finally{V.value=!1}},ae=o=>{y.value=!0,A.value=o.total.error};return re(g,ue.debounce(()=>{F()},1e3)),ne(()=>{ee(),F(),se()}),(o,e)=>(u(),w(U,null,[l(ie,null,{default:t(()=>[l(j,null,{default:t(()=>[l(i,null,{default:t(()=>[l(ce,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),"align-tabs":"center"},{default:t(()=>[l(z,{value:"one"},{default:t(()=>e[9]||(e[9]=[W("مانیتور سرور")])),_:1}),l(z,{value:"two"},{default:t(()=>e[10]||(e[10]=[W("مانیتور انتقال")])),_:1}),l(z,{value:"three"},{default:t(()=>e[11]||(e[11]=[W("تحلیل کاربران")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(i,{cols:"12"},{default:t(()=>[l(fe,null,{default:t(()=>[l(me,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=a=>_.value=a)},{default:t(()=>[l(E,{value:"one"},{default:t(()=>[l(x,{title:"سرویس ها"},{text:t(()=>[l(B,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=a=>h.value=a),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:t(()=>[l(H,{headers:K.value,items:M.value,search:h.value,loading:v.value},{"item.status":t(({item:a})=>[l(R,{text:a.status==0?"DOWN":"UP",color:a.status==0?"#ff0000":"#43A047",size:"small"},null,8,["text","color"])]),"item.error":t(({item:a})=>[l(f,{class:"me-2",size:"small",icon:"ri-signal-wifi-error-line",color:"#d4af37",onClick:p=>ae(a)},null,8,["onClick"])]),_:1},8,["headers","items","search","loading"])]),_:1})]),_:1}),l(E,{value:"two"},{default:t(()=>[l(x,{title:"انتقال ها"},{text:t(()=>[l(B,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value=a),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:t(()=>[l(H,{headers:X.value,items:$.value,loading:S.value},{"item.isHaveBank":t(({item:a})=>[a.isHaveBank==!1?(u(),c(f,{key:0,size:"small",icon:"ri-close-line",color:"#c9190c"})):a.isHaveBank==!0?(u(),c(f,{key:1,size:"small",icon:"ri-check-line",color:"#0b8707"})):G("",!0)]),"item.oldUserCheck":t(({item:a})=>[a.oldUserCheck==!1?(u(),c(f,{key:0,size:"small",icon:"ri-close-line",color:"#c9190c"})):a.oldUserCheck==!0?(u(),c(f,{key:1,size:"small",icon:"ri-check-line",color:"#0b8707"})):G("",!0)]),"item.action":t(({item:a})=>[l(f,{class:"me-2",size:"small",icon:"ri-exchange-funds-line",color:"#c9190c",loading:V.value,onClick:p=>le(a)},null,8,["loading","onClick"])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),l(E,{value:"three"},{default:t(()=>[l(x,{title:"تحلیل کاربران"},{text:t(()=>[l(B,{modelValue:D.value,"onUpdate:modelValue":e[3]||(e[3]=a=>D.value=a),label:"جستجو","prepend-inner-icon":"ri-search-line"},null,8,["modelValue"])]),default:t(()=>[s("div",pe,[l(ve,{title:"درصد خطا",type:"error",variant:"tonal"},{default:t(()=>[s("div",xe,[s("h2",_e,r(Z.value)+"%",1)])]),_:1})]),l(H,{headers:Y.value,items:L.value,search:D.value,loading:T.value},{"item.compare":t(({item:a})=>[l(R,{text:a.compare,color:"#ff0000",size:"small"},null,8,["text"])]),_:1},8,["headers","items","search","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(O,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=a=>y.value=a),"max-width":"500",class:"error-dialog"},{default:t(()=>[l(x,{class:"dialog-card"},{default:t(()=>[s("div",ye,[(u(!0),w(U,null,q(A.value,(a,p)=>(u(),w("div",{key:p},[s("p",null,r(a),1),l(I)]))),128))]),l(Q,null,{default:t(()=>[l(J),l(P,{text:"close",onClick:e[5]||(e[5]=a=>y.value=!1),size:"large",class:"m-3"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(O,{modelValue:k.value,"onUpdate:modelValue":e[8]||(e[8]=a=>k.value=a),"max-width":"500",class:"error-dialog"},{default:t(()=>[l(x,{class:"dialog-card"},{default:t(()=>[e[33]||(e[33]=s("div",{class:"k-dialog-title"},[s("p",null,"احراز هویت")],-1)),s("div",ge,[V.value==!0?(u(),c(j,{key:0},{default:t(()=>[l(i,{cols:"12"},{default:t(()=>e[12]||(e[12]=[s("div",{class:"d-flex justify-center align-center"},[s("p",null,"لطفا منتظر بمانید ...")],-1)])),_:1})]),_:1})):(u(),c(j,{key:1},{default:t(()=>[l(i,{cols:"6"},{default:t(()=>[s("div",Ve,[e[13]||(e[13]=s("p",{class:"mx-2"},"تعداد انتقال:",-1)),s("p",ke,r(d.value.logs.length),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",we,[e[14]||(e[14]=s("p",{class:"mx-2"},"حجم خرید:",-1)),s("p",be,r(d.value.allBuys),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",Ce,[e[15]||(e[15]=s("p",{class:"mx-2"},"حجم فروش:",-1)),s("p",he,r(d.value.allSels),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",Se,[e[16]||(e[16]=s("p",{class:"mx-2"},"موجودی ریالی:",-1)),s("p",De,r(d.value.balance),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",Te,[e[17]||(e[17]=s("p",{class:"mx-2"},"حجم واریز:",-1)),s("p",Ne,r(d.value.dep),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",Ue,[e[18]||(e[18]=s("p",{class:"mx-2"},"حجم خالص خرید:",-1)),s("p",je,r(d.value.goldW),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",We,[e[19]||(e[19]=s("p",{class:"mx-2"},"موجودی صندوق طلا:",-1)),s("p",ze,r(d.value.mainWallet),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",Ee,[e[20]||(e[20]=s("p",{class:"mx-2"},"برداشت:",-1)),s("p",Be,r(d.value.withd),1)])]),_:1}),l(I,{class:"my-3"}),(u(!0),w(U,null,q(d.value.logs,(a,p)=>(u(),c(i,{cols:"12",key:p},{default:t(()=>[s("div",He,[s("div",Ie,[e[21]||(e[21]=s("p",{class:"mx-1"},"founded:",-1)),s("p",Me,r(a.founded),1)]),s("div",Ae,[e[22]||(e[22]=s("p",{class:"mx-1"},"weight:",-1)),s("p",$e,r(a.weight),1)]),s("div",Le,[e[23]||(e[23]=s("p",{class:"mx-1"},"nationalCode:",-1)),s("p",Fe,r(a.nationalCode),1)]),s("div",Ge,[e[24]||(e[24]=s("p",{class:"mx-1"},"userId:",-1)),s("p",qe,r(a.userId),1)]),s("div",Pe,[e[25]||(e[25]=s("p",{class:"mx-1"},"date:",-1)),s("p",Oe,r(a.date),1)]),s("div",Qe,[e[26]||(e[26]=s("p",{class:"mx-1"},"time:",-1)),s("p",Re,r(a.time),1)])]),l(I)]),_:2},1024))),128)),l(i,{cols:"6"},{default:t(()=>[s("div",Je,[e[27]||(e[27]=s("p",{class:"mx-1"},"verificationStatus:",-1)),s("p",Ke,r(d.value.oldWe.verificationStatus),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",Xe,[e[28]||(e[28]=s("p",{class:"mx-1"},"nationalCode:",-1)),s("p",Ye,r(d.value.oldWe.nationalCode),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",Ze,[e[29]||(e[29]=s("p",{class:"mx-1"},"phoneNumber:",-1)),s("p",es,r(d.value.oldWe.phoneNumber),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",ss,[e[30]||(e[30]=s("p",{class:"mx-1"},"validData:",-1)),s("p",ls,r(d.value.oldWe.validData),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",ts,[e[31]||(e[31]=s("p",{class:"mx-1"},"wallet:",-1)),s("p",as,r(d.value.oldWe.wallet.goldWeight),1)])]),_:1}),l(i,{cols:"6"},{default:t(()=>[s("div",os,[e[32]||(e[32]=s("p",{class:"mx-1"},"verificationStatus:",-1)),s("p",rs,r(d.value.oldWe.verificationStatus),1)])]),_:1})]),_:1}))]),l(Q,null,{default:t(()=>[l(J),l(P,{text:"بستن",onClick:e[7]||(e[7]=a=>k.value=!1),size:"large",class:"m-3"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Us=oe(ns,[["__scopeId","data-v-165d0ca0"]]);export{Us as default};
