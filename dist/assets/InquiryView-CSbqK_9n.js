import{_ as W,r as i,c as w,a,b as t,w as o,a1 as f,e as V,h as N,F as I,o as p,a2 as r,a4 as h,C as x,t as n,bR as S}from"./index-M-ksGW5I.js";import{W as q}from"./wallet-DXHJ7jsK.js";import{V as D}from"./VAlert-BteyOiC9.js";import{V as F}from"./VCard-CBMrbeTG.js";import{V as R}from"./VTextField-D32llGkt.js";import"./api-JkepSPcn.js";import"./api-CjoxBmtW.js";import"./createSimpleFunctional-TTDR03ld.js";import"./VAvatar-D3dcEOar.js";import"./VImg-BzFsDdol.js";import"./index-C7C0uFbA.js";import"./index-DLmfDg-L.js";const T={class:"d-flex align-center"},E={class:"d-flex align-center"},$={class:"d-flex align-center"},z={class:"d-flex align-center"},A={class:"d-flex align-center"},L={class:"d-flex align-center"},M={__name:"InquiryView",setup(Q){const v=i(""),c=i(!1),d=i({reciever:"",sender:"",goldWeight:""}),s=i({firstName:"",lastName:"",nationalCode:"",phoneNumber:"",goldWeight:"",goldBlock:""}),g=i(!1),m=i(!1),k=async()=>{try{m.value=!0;const e=await q.QuiryWallet(d.value.sender);return s.value.firstName=e.data.firstName,s.value.lastName=e.data.lastName,s.value.nationalCode=e.data.nationalCode,s.value.goldBlock=e.data.goldBlock,s.value.phoneNumber=e.data.phoneNumber,s.value.goldWeight=e.data.goldWeight,g.value=!0,e}catch(e){e.response.status==401&&(localStorage.clear(),S.replace("/login")),v.value=e.response.data.error||"خطایی رخ داده است!",c.value=!0,setTimeout(()=>{c.value=!1},1e4)}finally{m.value=!1}},_=[e=>!!e||"کد ملی الزامی است",e=>/^\d{10}$/.test(e)||"کد ملی باید ۱۰ رقم باشد",e=>{if(!/^\d{10}$/.test(e))return!0;const l=+e[9],u=e.split("").slice(0,9).reduce((y,C,B)=>y+ +C*(10-B),0)%11;return u<2&&l===u||u>=2&&l+u===11||"کد ملی نامعتبر است"}],b=()=>{d.value.sender=d.value.sender.replace(/\D/g,"").slice(0,10),_.every(e=>e(d.value.sender)===!0)};return(e,l)=>(p(),w(I,null,[a("div",null,[t(f,null,{default:o(()=>[t(r,{cols:"12"},{default:o(()=>[t(F,{title:"استعلام صندوق طلا",class:"transfer-card"},{default:o(()=>[t(f,null,{default:o(()=>[t(r,{class:"d-none d-md-flex",md:"2"}),t(r,{cols:"12",md:"4"},{default:o(()=>[t(R,{modelValue:d.value.sender,"onUpdate:modelValue":l[0]||(l[0]=u=>d.value.sender=u),label:"کد ملی انتقال دهنده",variant:"outlined",rules:_,onInput:b},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"4"},{default:o(()=>[t(h,{block:"",color:"#d4af37",size:"large",onClick:k,loading:m.value},{default:o(()=>l[1]||(l[1]=[x("استعلام موجودی")])),_:1},8,["loading"])]),_:1}),t(r,{class:"d-none d-md-flex",md:"2"})]),_:1}),g.value?(p(),V(f,{key:0},{default:o(()=>[t(r,{cols:"6",md:"3"},{default:o(()=>[a("div",T,[l[2]||(l[2]=a("p",null,"نام : ",-1)),a("p",null,n(s.value.firstName),1)])]),_:1}),t(r,{cols:"6",md:"3"},{default:o(()=>[a("div",E,[l[3]||(l[3]=a("p",null,"نام خانوادگی : ",-1)),a("p",null,n(s.value.lastName),1)])]),_:1}),t(r,{cols:"6",md:"3"},{default:o(()=>[a("div",$,[l[4]||(l[4]=a("p",null,"شماره همراه : ",-1)),a("p",null,n(s.value.phoneNumber),1)])]),_:1}),t(r,{cols:"6",md:"3"},{default:o(()=>[a("div",z,[l[5]||(l[5]=a("p",null,"کد ملی : ",-1)),a("p",null,n(s.value.nationalCode),1)])]),_:1}),t(r,{cols:"6",md:"3"},{default:o(()=>[a("div",A,[l[6]||(l[6]=a("p",null,"موجودی صندوق طلا : ",-1)),a("p",null,n(s.value.goldWeight),1)])]),_:1}),t(r,{cols:"6",md:"3"},{default:o(()=>[a("div",L,[l[7]||(l[7]=a("p",null,"در صف انتقال : ",-1)),a("p",null,n(s.value.goldBlock),1)])]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1})]),_:1})]),c.value?(p(),V(D,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:o(()=>[x(n(v.value),1)]),_:1})):N("",!0)],64))}},le=W(M,[["__scopeId","data-v-b0f22c0a"]]);export{le as default};
